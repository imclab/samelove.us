samelove=function(){var e=function(e,t){return e.exports=t,function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof t=="object")e(void 0,t);else if(typeof define=="function")define(e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=function(){var t={};return e(void 0,t)}}else e(void 0,Q={})}(function(e,t){"use strict";function b(e){return y(e)==="[object StopIteration]"||e instanceof w}function S(e,t){t.stack&&typeof e=="object"&&e!==null&&e.stack&&e.stack.indexOf(E)===-1&&(e.stack=x(e.stack)+"\n"+E+"\n"+x(t.stack))}function x(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!N(i)&&!T(i)&&n.push(i)}return n.join("\n")}function T(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function N(e){var t=/at .+ \((.*):(\d+):\d+\)/.exec(e);if(!t)return!1;var i=t[1],s=t[2];return i===r&&s>=n&&s<=Nt}function C(){if(Error.captureStackTrace){var e,t,n=Error.prepareStackTrace;return Error.prepareStackTrace=function(n,r){e=r[1].getFileName(),t=r[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=n,r=e,t}}function k(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function L(){function u(r){if(!e)return;n=U(r),p(e,function(e,t){o(function(){n.promiseSend.apply(n,t)})},void 0),e=void 0,t=void 0}var e=[],t=[],n,r=m(L.prototype),i=m(O.prototype);return i.promiseSend=function(r,i,s,u){var a=h(arguments);e?(e.push(a),r==="when"&&u&&t.push(u)):o(function(){n.promiseSend.apply(n,a)})},i.valueOf=function(){return e?i:n.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(i,L),i.stack=i.stack.substring(i.stack.indexOf("\n")+1)),s(i),r.promise=i,r.resolve=u,r.reject=function(e){u(R(e))},r.notify=function(n){e&&p(t,function(e,t){o(function(){t(n)})},void 0)},r}function A(e){var t=L();return st(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function O(e,t,n,r){t===void 0&&(t=function(e){return R(new Error("Promise does not support operation: "+e))});var i=m(O.prototype);return i.promiseSend=function(n,r){var s=h(arguments,2),o;try{e[n]?o=e[n].apply(i,s):o=t.apply(i,[n].concat(s))}catch(u){o=R(u)}r&&r(o)},n&&(i.valueOf=n),r&&(i.exception=r),s(i),i}function M(e){return _(e)?e.valueOf():e}function _(e){return e&&typeof e.promiseSend=="function"}function D(e){return e&&typeof e.then=="function"}function P(e){return H(e)||B(e)}function H(e){return!D(M(e))}function B(e){return e=M(e),_(e)&&"exception"in e}function q(){!I&&typeof window!="undefined"&&!window.Touch&&window.console&&console.log("Should be empty:",F),I=!0}function R(e){var t=O({when:function(t){if(t){var n=d(j,this);n!==-1&&(F.splice(n,1),j.splice(n,1))}return t?t(e):R(e)}},function(){return R(e)},function n(){return this},e);return q(),j.push(t),F.push(e),t}function U(e){if(_(e))return e;e=M(e);if(D(e)){var t=L();return e.then(t.resolve,t.reject,t.notify),t.promise}return O({when:function(){return e},get:function(t){return e[t]},put:function(t,n){return e[t]=n,e},del:function(t){return delete e[t],e},post:function(t,n){return e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},fapply:function(t){return e.apply(void 0,t)},viewInfo:function(){function r(e){n[e]||(n[e]=typeof t[e])}var t=e,n={};while(t)Object.getOwnPropertyNames(t).forEach(r),t=Object.getPrototypeOf(t);return{type:typeof e,properties:n}},keys:function(){return g(e)}},void 0,function n(){return e})}function z(e){return O({isDef:function(){}},function(){var n=h(arguments);return Y.apply(void 0,[e].concat(n))},function(){return M(e)})}function W(e,t){return e=U(e),t?O({viewInfo:function(){return t}},function(){var n=h(arguments);return Y.apply(void 0,[e].concat(n))},function(){return M(e)}):Y(e,"viewInfo")}function X(e){return W(e).when(function(t){var n;t.type==="function"?n=function(){return nt(e,void 0,arguments)}:n={};var r=t.properties||{};return g(r).forEach(function(t){r[t]==="function"&&(n[t]=function(){return tt(e,t,arguments)})}),U(n)})}function V(e,t,n,r){function u(e){try{return typeof t=="function"?t(e):e}catch(n){return R(n)}}function a(e){if(typeof n=="function"){S(e,l);try{return n(e)}catch(t){return R(t)}}return R(e)}function f(e){return typeof r=="function"?r(e):e}var i=L(),s=!1,l=U(e);return o(function(){l.promiseSend("when",function(e){if(s)return;s=!0,i.resolve(u(e))},function(e){if(s)return;s=!0,i.resolve(a(e))})}),l.promiseSend("when",void 0,void 0,function(e){i.notify(f(e))}),i.promise}function $(e,t,n){return V(e,function(e){return at(e).then(function(e){return t.apply(void 0,e)},n)},n)}function J(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return b(o)?o.value:R(o)}return V(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function K(e){throw new w(e)}function Q(e){return function(){return at([this,at(arguments)]).spread(function(t,n){return e.apply(t,n)})}}function G(e){return function(t){var n=h(arguments,1);return Y.apply(void 0,[t,e].concat(n))}}function Y(e,t){var n=L(),r=h(arguments,2);return e=U(e),o(function(){e.promiseSend.apply(e,[t,n.resolve].concat(r))}),n.promise}function Z(e,t,n){var r=L();return e=U(e),o(function(){e.promiseSend.apply(e,[t,r.resolve].concat(n))}),r.promise}function et(e){return function(t){var n=h(arguments,1);return Z(t,e,n)}}function it(e,t){var n=h(arguments,2);return nt(e,t,n)}function st(e){var t=h(arguments,1);return rt(e,t)}function ot(e,t){var n=h(arguments,2);return function(){var i=n.concat(h(arguments));return nt(e,t,i)}}function ut(e){var t=h(arguments,1);return function(){var r=t.concat(h(arguments));return rt(e,r)}}function at(e){return V(e,function(e){var t=e.length;if(t===0)return U(e);var n=L();return p(e,function(r,i,s){H(i)?(e[s]=M(i),--t===0&&n.resolve(e)):V(i,function(r){e[s]=r,--t===0&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function ft(e){return V(e,function(e){return V(at(v(e,function(e){return V(e,i,i)})),function(){return v(e,U)})})}function lt(e,t){return V(e,void 0,t)}function ct(e,t){return V(e,void 0,void 0,t)}function ht(e,t){return V(e,function(e){return V(t(),function(){return e})},function(e){return V(t(),function(){return R(e)})})}function pt(e,n,r,i){function s(n){o(function(){S(n,e);if(!t.onerror)throw n;t.onerror(n)})}var u=n||r||i?V(e,n,r,i):e;lt(u,s)}function dt(e,t){var n=L(),r=setTimeout(function(){n.reject(new Error("Timed out after "+t+" ms"))},t);return V(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise}function vt(e,t){t===void 0&&(t=e,e=void 0);var n=L();return setTimeout(function(){n.resolve(e)},t),n.promise}function mt(e,t){var n=h(t),r=L();return n.push(r.makeNodeResolver()),rt(e,n).fail(r.reject),r.promise}function gt(e){var t=h(arguments,1),n=L();return t.push(n.makeNodeResolver()),rt(e,t).fail(n.reject),n.promise}function yt(e){var t=h(arguments,1);return function(){var n=t.concat(h(arguments)),r=L();return n.push(r.makeNodeResolver()),rt(e,n).fail(r.reject),r.promise}}function bt(e,t,n){return Et(e,t).apply(void 0,n)}function wt(e,t){var n=h(arguments,2);return bt(e,t,n)}function Et(e){if(arguments.length>1){var t=arguments[1],n=h(arguments,2),r=e;e=function(){var e=n.concat(h(arguments));return r.apply(t,e)}}return function(){var t=L(),n=h(arguments);return n.push(t.makeNodeResolver()),rt(e,n).fail(t.reject),t.promise}}function St(e,t,n){var r=h(n),i=L();return r.push(i.makeNodeResolver()),tt(e,t,r).fail(i.reject),i.promise}function xt(e,t){var n=h(arguments,2),r=L();return n.push(r.makeNodeResolver()),tt(e,t,n).fail(r.reject),r.promise}function Tt(e,t){if(!t)return e;e.then(function(e){o(function(){t(null,e)})},function(e){o(function(){t(e)})})}var n=C(),r,i=function(){},s=Object.freeze||i;typeof cajaVM!="undefined"&&(s=cajaVM.def);var o;if(typeof process!="undefined")o=process.nextTick;else if(typeof setImmediate=="function")o=setImmediate;else if(typeof MessageChannel!="undefined"){var u=new MessageChannel,a={},f=a;u.port1.onmessage=function(){a=a.next;var e=a.task;delete a.task,e()},o=function(e){f=f.next={task:e},u.port2.postMessage(0)}}else o=function(e){setTimeout(e,0)};var l;if(Function.prototype.bind){var c=Function.prototype.bind;l=c.bind(c.call)}else l=function(e){return function(){return e.call.apply(e,arguments)}};var h=l(Array.prototype.slice),p=l(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),d=l(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),v=l(Array.prototype.map||function(e,t){var n=this,r=[];return p(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),m=Object.create||function(e){function t(){}return t.prototype=e,new t},g=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},y=Object.prototype.toString,w;typeof ReturnValue!="undefined"?w=ReturnValue:w=function(e){this.value=e};var E="From previous event:";t.nextTick=o,t.defer=L,L.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(h(arguments,1)):e.resolve(n)}},L.prototype.node=k(L.prototype.makeNodeResolver,"node","makeNodeResolver"),t.promise=A,t.makePromise=O,O.prototype.then=function(e,t,n){return V(this,e,t,n)},O.prototype.thenResolve=function(e){return V(this,function(){return e})},p(["isResolved","isFulfilled","isRejected","when","spread","send","get","put","del","post","invoke","keys","apply","call","bind","fapply","fcall","fbind","all","allResolved","view","viewInfo","timeout","delay","catch","finally","fail","fin","progress","end","done","nfcall","nfapply","nfbind","ncall","napply","nbind","npost","ninvoke","nend","nodeify"],function(e,n){O.prototype[n]=function(){return t[n].apply(t,[this].concat(h(arguments)))}},void 0),O.prototype.toSource=function(){return this.toString()},O.prototype.toString=function(){return"[object Promise]"},s(O.prototype),t.nearer=M,t.isPromise=_,t.isPromiseAlike=D,t.isResolved=P,t.isFulfilled=H,t.isRejected=B;var j=[],F=[],I;t.reject=R,t.begin=U,t.resolve=U,t.ref=k(U,"ref","resolve"),t.master=z,t.viewInfo=W,t.view=X,t.when=V,t.spread=$,t.async=J,t["return"]=K,t.promised=Q,t.sender=k(G,"sender","dispatcher"),t.Method=k(G,"Method","dispatcher"),t.send=k(Y,"send","dispatch"),t.dispatch=Z,t.dispatcher=et,t.get=et("get"),t.put=et("put"),t["delete"]=t.del=et("del");var tt=t.post=et("post");t.invoke=function(e,t){var n=h(arguments,2);return tt(e,t,n)};var nt=t.apply=k(et("apply"),"apply","fapply"),rt=t.fapply=et("fapply");t.call=k(it,"call","fcall"),t["try"]=st,t.fcall=st,t.bind=k(ot,"bind","fbind"),t.fbind=ut,t.keys=et("keys"),t.all=at,t.allResolved=ft,t["catch"]=t.fail=lt,t.progress=ct,t["finally"]=t.fin=ht,t.end=k(pt,"end","done"),t.done=pt,t.timeout=dt,t.delay=vt,t.nfapply=mt,t.nfcall=gt,t.nfbind=yt,t.napply=k(bt,"napply","npost"),t.ncall=k(wt,"ncall","ninvoke"),t.nbind=k(Et,"nbind","nfbind"),t.npost=St,t.ninvoke=xt,t.nend=k(Tt,"nend","nodeify"),t.nodeify=Tt;var Nt=C()}),e.exports}({},{}),n=function(e,t){return e.exports=t,window.Modernizr=function(e,t,n){function A(e){f.cssText=e}function O(e,t){return A(p.join(e+";")+(t||""))}function M(e,t){return typeof e===t}function _(e,t){return!!~(""+e).indexOf(t)}function D(e,t){for(var r in e){var i=e[r];if(!_(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function P(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:M(s,"function")?s.bind(r||t):s}return!1}function H(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return M(t,"string")||M(t,"undefined")?D(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),P(i,t,n))}function B(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.6.2",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l,c=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),c.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),c.id=u,(h?c:p).innerHTML+=s,p.appendChild(c),h||(p.style.background="",p.style.overflow="hidden",l=o.style.overflow,o.style.overflow="hidden",o.appendChild(p)),a=n(c,e),h?c.parentNode.removeChild(c):(p.parentNode.removeChild(p),o.style.overflow=l),!!a},N=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return T("@media "+t+" { #"+u+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},C=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=M(i[r],"function"),M(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),k={}.hasOwnProperty,L;!M(k,"undefined")&&!M(k.call,"undefined")?L=function(e,t){return k.call(e,t)}:L=function(e,t){return t in e&&M(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return H("flexWrap")},y.flexboxlegacy=function(){return H("boxDirection")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!M(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!H("indexedDB",e)},y.hashchange=function(){return C("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return A("background-color:rgba(150,255,150,.5)"),_(f.backgroundColor,"rgba")},y.hsla=function(){return A("background-color:hsla(120,40%,100%,.5)"),_(f.backgroundColor,"rgba")||_(f.backgroundColor,"hsla")},y.multiplebgs=function(){return A("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return H("backgroundSize")},y.borderimage=function(){return H("borderImage")},y.borderradius=function(){return H("borderRadius")},y.boxshadow=function(){return H("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return O("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return H("animationName")},y.csscolumns=function(){return H("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return A((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),_(f.backgroundImage,"gradient")},y.cssreflections=function(){return H("boxReflect")},y.csstransforms=function(){return!!H("transform")},y.csstransforms3d=function(){var e=!!H("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=function(){return H("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(["#",u,"{font:0/0 a}#",u,':after{content:"',c,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var j in y)L(y,j)&&(x=j.toLowerCase(),i[x]=y[j](),E.push((i[x]?"":"no-")+x));return i.input||B(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)L(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,typeof s!="undefined"&&s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},A(""),a=l=null,function(e,t){function l(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function c(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function h(e){var t=a[e[o]];return t||(t={},u++,e[o]=u,a[u]=t),t}function p(e,n,s){n||(n=t);if(f)return n.createElement(e);s||(s=h(n));var o;return s.cache[e]?o=s.cache[e].cloneNode():i.test(e)?o=(s.cache[e]=s.createElem(e)).cloneNode():o=s.createElem(e),o.canHaveChildren&&!r.test(e)?s.frag.appendChild(o):o}function d(e,n){e||(e=t);if(f)return e.createDocumentFragment();n=n||h(e);var r=n.frag.cloneNode(),i=0,s=c(),o=s.length;for(;i<o;i++)r.createElement(s[i]);return r}function v(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?p(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function m(e){e||(e=t);var n=h(e);return g.shivCSS&&!s&&!n.hasCSS&&(n.hasCSS=!!l(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),f||v(e,n),e}var n=e.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,i=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,s,o="_html5shiv",u=0,a={},f;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,f=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){s=!0,f=!0}})();var g={elements:n.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:n.shivCSS!==!1,supportsUnknownElements:f,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:m,createElement:p,createDocumentFragment:d};e.html5=g,m(t)}(this,t),i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.mq=N,i.hasEvent=C,i.testProp=function(e){return D([e])},i.testAllProps=H,i.testStyles=T,i.prefixed=function(e,t,n){return t?H(e,t,n):H(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),e.exports}({},{}),r=function(e,t){return e.exports=t,Modernizr.addTest("cssfilters",function(){var e=document.createElement("div");return e.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!e.style.length&&(document.documentMode===undefined||document.documentMode>9)}),e.exports}({},{}),i=function(e,t){return e.exports=t,function(e){"use strict";function t(){}function i(e,t){if(r)return t.indexOf(e);var n=t.length;while(n--)if(t[n]===e)return n;return-1}var n=t.prototype,r=Array.prototype.indexOf?!0:!1;n._getEvents=function(){return this._events||(this._events={})},n.getListeners=function(e){var t=this._getEvents();return t[e]||(t[e]=[])},n.addListener=function(e,t){var n=this.getListeners(e);return i(t,n)===-1&&n.push(t),this},n.on=n.addListener,n.removeListener=function(e,t){var n=this.getListeners(e),r=i(t,n);return r!==-1&&(n.splice(r,1),n.length===0&&this.removeEvent(e)),this},n.off=n.removeListener,n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if(typeof t=="object")for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&(typeof i=="function"?s.call(this,r,i):o.call(this,r,i));else{r=n.length;while(r--)s.call(this,t,n[r])}return this},n.removeEvent=function(e){return e?delete this._getEvents()[e]:delete this._events,this},n.emitEvent=function(e,t){var n=this.getListeners(e),r=n.length,i;while(r--)i=t?n[r].apply(null,t):n[r](),i===!0&&this.removeListener(e,n[r]);return this},n.trigger=n.emitEvent,n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},typeof define=="function"&&define.amd?define(function(){return t}):e.EventEmitter=t}(this),e.exports}({},{}),s=function(e,t){return e.exports=t,e.exports={offset:"0",results:[{body:"LONDON &#x2014; The House of Commons voted overwhelmingly on Tuesday to approve a bill legalizing same-sex marriage in Britain , indicating that the bill is assured of passage as it moves through further legislative stages.&#xa; &#xa;But in a major setback for Prime Minister David Cameron , who championed the measure, it appeared that more than",byline:"By JOHN F. BURNS and ALAN COWELL",date:"20130206",publication_day:"06",publication_month:"02",publication_year:"2013",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2013/02/06/world/06Britain_2/06Britain_2-thumbStandard.jpg",title:"British Lawmakers Vote for Gay Marriage Despite Conservative Split",url:"http://www.nytimes.com/2013/02/06/world/europe/britain-gay-marriage-vote.html"},{body:"WASHINGTON &#x2014; The practice of law would be much more pleasant, many lawyers will tell you over a second Scotch, if it did not require clients. It is one thing to construct an airtight legal argument and quite another to deal with the demands of inconstant human beings.&#xa; &#xa;Consider Solicitor General Donald B. Verrilli Jr. &#x2019;s most",byline:"By ADAM LIPTAK",date:"20130205",publication_day:"05",publication_month:"02",publication_year:"2013",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2013/02/05/us/05bar-cnd/05bar-cnd-thumbStandard.jpg",title:"SIDEBAR; A Predicament on Gay Marriage",url:"http://www.nytimes.com/2013/02/05/us/politics/solicitor-generals-predicament-on-gay-marriage.html"},{body:"LONDON &#x2014; On the eve of a divisive vote in Parliament on the legalization of same-sex marriage , Justin Welby , the former bishop of Durham, on Monday took over formally as the 105th archbishop of Canterbury, the spiritual head of the world&#x2019;s 77 million Anglicans, saying he shares the Church of England&#x2019;s opposition to marriage",byline:"By ALAN COWELL",date:"20130205",publication_day:"05",publication_month:"02",publication_year:"2013",title:"Britain: The New Archbishop&#xd; Of Canterbury Is Confirmed",url:"http://www.nytimes.com/2013/02/05/world/europe/new-archbishop-of-canterbury-confirmation.html"},{body:"By including gay rights in the arc of the struggle for civil rights &#x2014; the road &#x201C;through Seneca Falls and Selma and Stonewall&#x201D; &#x2014; President Obama linked his presidency to ending antigay discrimination and underscored the legal wrong of denying gay people the freedom to marry.&#xa; &#xa;&#x201C;Our journey is not complete",date:"20130128",publication_day:"28",publication_month:"01",publication_year:"2013",title:"EDITORIAL; Beyond Selma-to-Stonewall",url:"http://www.nytimes.com/2013/01/28/opinion/beyond-mr-obamas-inaugural-message-on-gay-rights.html"},{body:"Seneca Falls, Selma, Stonewall. The alliteration of that litany made it seem obvious and inevitable, a bit of poetry just there for the taking. Just waiting to happen.&#xa; &#xa;But it has waited a long time. And President Obama&#x2019;s use of it in his speech on Monday &#x2014; his grouping of those three places and moments in one grand and",byline:"By FRANK BRUNI",date:"20130122",publication_day:"22",publication_month:"01",publication_year:"2013",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2011/06/24/opinion/Bruni_new/Bruni_new-thumbStandard-v3.jpg",title:"OP-ED COLUMNIST; A Map Of Human Dignity",url:"http://www.nytimes.com/2013/01/22/opinion/bruni-a-map-of-human-dignity.html"},{body:"&#x201C;I NOW pronounce you husband and wife,&#x201D; the minister said to Anthony and me 22 years ago. Although I was thrilled about what we were undertaking, I cringed. Being pronounced a &#x201C;wife&#x201D; felt archaic and just plain weird. I went with it, squeamish but thankful that at least we&#x2019;d gotten past the days of",byline:"By MARGOT PAGE",date:"20130120",publication_day:"20",publication_month:"01",publication_year:"2013",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2013/01/20/fashion/20MODERNLOVE_SPAN/20MODERNLOVE_SPAN-thumbStandard.jpg",title:"MODERN LOVE; Labels of Married Life, in a New Light",url:"http://www.nytimes.com/2013/01/20/fashion/labels-of-married-life-in-a-new-light-modern-love.html"},{body:"PARIS &#x2014; Frigide Barjot has made a career of mocking the establishment of France , dressing in fluorescent pink sweaters, playing in a band called the Dead Pompidous and hosting a philosophy soir&#xE9;e at which she handed out T-shirts with the logo, &#x201C;Kierkegaard is my homeboy.&#x201D;&#xa; &#xa;But Ms. Barjot, born Virginie Merle 50",byline:"By STEVEN ERLANGER; Scott Sayare contributed reporting.",date:"20130110",publication_day:"10",publication_month:"01",publication_year:"2013",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2013/01/10/world/france1/france1-thumbStandard-v2.jpg",title:"At Once Catholic and Secular, France Debates Gay Marriage",url:"http://www.nytimes.com/2013/01/10/world/europe/france-debates-gay-marriage-law.html"},{body:"NOW that we&#x2019;ve come to some consensus on same-sex marriage , let&#x2019;s move on to the next puzzle: what to call two people who act as if they are married but are not. &#xa; &#xa;&#x201C;I went through a phase of just calling him Eric, even to people who didn&#x2019;t know who that was,&#x201D; said the master wordsmith Ann Kjellberg, 50,",byline:"By ELIZABETH WEIL",date:"20130106",publication_day:"06",publication_month:"01",publication_year:"2013",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2013/01/06/fashion/06UNMARRIED1_SPAN/06UNMARRIED1_SPAN-thumbStandard-v3.jpg",title:"Unmarried Spouses Have a Way With Words",url:"http://www.nytimes.com/2013/01/06/fashion/unmarried-spouses-have-a-way-with-words.html"},{body:"Richard Adams, who nearly four decades ago legally married his male partner in Colorado and, in the first lawsuit of its kind, tried unsuccessfully to have their marriage recognized by the federal government, died on Dec. 17 at his home in Los Angeles. He was 65. &#xa; &#xa;Mr. Adams died after a short illness, his lawyer, Lavi Soloway, said. In",byline:"By MARGALIT FOX",date:"20121225",publication_day:"25",publication_month:"12",publication_year:"2012",small_image_height:"75",small_image_url:"http://www.nytimes.com/images/2012/12/24/us/ADAMS/ADAMS-thumbStandard.jpg",title:"Richard Adams, Same-Sex Spouse Since 1975 Who Sued U.S., Dies at 65",url:"http://www.nytimes.com/2012/12/25/us/richard-adams-who-sued-us-after-1975-gay-marriage-dies-at-65.html"},{body:"More than 250 religious leaders in Illinois have signed an open letter in support of same-sex marriage , which the legislature is likely to take up in January.&#xa; &#xa;&#x201C;We dedicate our lives to fostering faith and compassion, and we work daily to promote justice and fairness for all,&#x201D; the leaders wrote in the letter, which was",byline:"By MAGGIE ASTOR",date:"20121224",publication_day:"24",publication_month:"12",publication_year:"2012",title:"Illinois Clergy Members Support Same-Sex Marriage in Letter Signed by 260",url:"http://www.nytimes.com/2012/12/24/us/260-in-illinois-clergy-call-for-legal-gay-marriage.html"}],tokens:["love","nytd_des_facet:[Same-Sex Marriage, Civil Unions and Domestic Partnerships]"],total:151},e.exports}({},{}),o=function(e,t){return e.exports=t,e.exports={offset:"1",results:[{body:"They are among the bastions of gay pride and culture in New York City: the Stonewall Inn, the Greenwich Village bar where riots against a police raid in 1969 sparked the city's gay rights movement, and Chelsea, the Manhattan neighborhood. But in separate episodes over the weekend, the safety and welcoming atmosphere of those places were tainted by",byline:"By JOHN ELIGON",date:"20101005",publication_day:"05",publication_month:"10",publication_year:"2010",title:"Antigay Attacks Reported At Stonewall and in Chelsea",url:"http://www.nytimes.com/2010/10/05/nyregion/05stonewall.html"},{body:"Archbishop Timothy M. Dolan told parishioners during Mass on Sunday that he was saddened by a spate of suspected anti-Hispanic attacks on Staten Island that had left some Latin American immigrants fearing for their safety. Archbishop Dolan made the remarks during a Spanish-language sermon at St. Mary's of The Assumption Roman Catholic Church in the",byline:"By THE ASSOCIATED PRESS",date:"20100823",publication_day:"23",publication_month:"08",publication_year:"2010",title:"Dolan Speaks on Staten Island Attacks",url:"http://www.nytimes.com/2010/08/23/nyregion/23staten.html"},{body:"In the public's imagination, the classic hate crime is an assault born of animus against a particular ethnicity or sexual orientation, like the case of the Long Island man convicted in April of killing an Ecuadorean immigrant after hunting for Hispanics to beat up. But in Queens since 2005, at least five people have been convicted of, or pleaded",byline:"By ANNE BARNARD",date:"20100623",publication_day:"23",publication_month:"06",publication_year:"2010",title:"A Novel Twist For Prosecution Of Hate Crimes",url:"http://www.nytimes.com/2010/06/23/nyregion/23hate.html"},{body:"On the witness stand, Romel Sucuzhañay sat up straight and calmly answered the prosecutor's questions, one after the other. He wore only one expression on his face, a determined scowl that hinted at rage. But then, after a half-hour, he stumbled, over just two words. ''I go to see my brother,'' Mr. Sucuzhañay began, as his head bowed and his",byline:"By KAREEM FAHIM",date:"20100423",publication_day:"23",publication_month:"04",publication_year:"2010",title:"Brother of Victim in Baseball-Bat Killing Wrestles With Emotions on the Witness Stand",url:"http://www.nytimes.com/2010/04/23/nyregion/23hate.html"},{body:"A taxi driver testified on Tuesday that he had a clear view when an Ecuadorean immigrant was fatally beaten in the Bushwick section of Brooklyn -- a killing that prosecutors said was motivated by hate. The driver, Davi Almonte, said he was waiting for a traffic light to change when he saw two Hispanic men walking and hugging each other. The next",byline:"By KAREEM FAHIM",date:"20100421",publication_day:"21",publication_month:"04",publication_year:"2010",title:"New Hate-Crime Murder Trial, This Time in Brooklyn",url:"http://www.nytimes.com/2010/04/21/nyregion/21brothers.html"},{body:"Corrections Appended Austin didn't know what to wear to his first gay dance last spring. It was bad enough that the gangly 13-year-old from Sand Springs, Okla., had to go without his boyfriend at the time, a 14-year-old star athlete at another middle school, but there were also laundry issues. ''I don't have any clean clothes!'' he complained to me",byline:"By BENOIT DENIZET-LEWIS",date:"20090927",publication_day:"27",publication_month:"09",publication_year:"2009",small_image_height:"75",small_image_url:"http://graphics8.nytimes.com/images/2009/09/27/magazine/out-75.jpg",title:"THE SCHOOL ISSUE: JUNIOR HIGH; Coming Out in Middle School",url:"http://www.nytimes.com/2009/09/27/magazine/27out-t.html"},{body:"With economic troubles pushing more people onto the streets in the last few years, law enforcement officials and researchers are seeing a surge in unprovoked attacks against the homeless, and a number of states are considering legislation to treat such assaults as hate crimes. This October, Maryland will become the first state to expand its",byline:"By ERIC LICHTBLAU",date:"20090808",publication_day:"08",publication_month:"08",publication_year:"2009",small_image_height:"75",small_image_url:"http://graphics8.nytimes.com/images/2009/08/08/us/homel75.jpg",title:"Attacks on Homeless Bring Push To Broaden Laws on Hate Crimes",url:"http://www.nytimes.com/2009/08/08/us/08homeless.html"},{body:"It is always edifying to see how New Yorkers deal with opinions that they despise. Three members of the Westboro Baptist Church held a protest the other day across from the Jewish Community Center on Amsterdam Avenue. This is a group based in Topeka, Kan., whose views may safely be described as loathsome to most people in this city. Westboro's",byline:"By CLYDE HABERMAN",date:"20090728",publication_day:"28",publication_month:"07",publication_year:"2009",title:"NYC; Learning To Tolerate Intolerance",url:"http://www.nytimes.com/2009/07/28/nyregion/28nyc.html"},{body:"The Senate has agreed to expand the definition of hate crimes to those committed because of a victim's sexual orientation and gender identity as part of a Pentagon policy measure that is becoming a magnet for tough social issues. Senators added the anti-bias provisions to the bill Thursday night after voting 63 to 28 to shut off debate on the",byline:"By CARL HULSE",date:"20090718",publication_day:"18",publication_month:"07",publication_year:"2009",title:"Senate Votes to Add Sexual Orientation to Hate Crime Protections",url:"http://www.nytimes.com/2009/07/18/us/politics/18hate.html"},{body:"A 19-year-old Manhattan man has been arrested in connection with anti-gay robbery attacks on the Upper East Side in May and June, the police said on Friday. The man, Driton Nicaj, was arrested on Thursday night near his home on East 84th Street, his father said. He faces charges including aggravated harassment and robbery as hate crimes. The police",byline:"By KAREEM FAHIM",date:"20090711",publication_day:"11",publication_month:"07",publication_year:"2009",title:"Manhattan Man, 19, Arrested in Anti-Gay Robbery Attacks",url:"http://www.nytimes.com/2009/07/11/nyregion/11rob.html"}],tokens:["anti","gay","nytd_des_facet:[Hate Crimes]"],total:42},e.exports}({},{}),u=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,t){return e.exports=t,function(e){"use strict";function t(){}function i(e,t){if(r)return t.indexOf(e);var n=t.length;while(n--)if(t[n]===e)return n;return-1}var n=t.prototype,r=Array.prototype.indexOf?!0:!1;n._getEvents=function(){return this._events||(this._events={})},n.getListeners=function(e){var t=this._getEvents();return t[e]||(t[e]=[])},n.addListener=function(e,t){var n=this.getListeners(e);return i(t,n)===-1&&n.push(t),this},n.on=n.addListener,n.removeListener=function(e,t){var n=this.getListeners(e),r=i(t,n);return r!==-1&&(n.splice(r,1),n.length===0&&this.removeEvent(e)),this},n.off=n.removeListener,n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if(typeof t=="object")for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&(typeof i=="function"?s.call(this,r,i):o.call(this,r,i));else{r=n.length;while(r--)s.call(this,t,n[r])}return this},n.removeEvent=function(e){return e?delete this._getEvents()[e]:delete this._events,this},n.emitEvent=function(e,t){var n=this.getListeners(e),r=n.length,i;while(r--)i=t?n[r].apply(null,t):n[r](),i===!0&&this.removeListener(e,n[r]);return this},n.trigger=n.emitEvent,n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},typeof define=="function"&&define.amd?define(function(){return t}):e.EventEmitter=t}(this),e.exports}({},{}),n=function(e,t){return e.exports=t,function(n,r){typeof t=="object"&&t?e.exports=r:typeof define=="function"&&define.amd?define(r):n.Mustache=r}(this,function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.parent=t,this.clearCache()}function v(){this.clearCache()}function m(e){function n(e,n,r){if(!t[e]){var i=m(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="",o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice(o[3],o[5]),s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1]}}return s}}function g(e){var t=[],n=t,r=[],i;for(var s=0,o=e.length;s<o;++s){i=e[s];switch(i[0]){case"#":case"^":r.push(i),n.push(i),n=i[4]=[];break;case"/":var u=r.pop();u[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(r=n,t.push(n));return t}function b(e){return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js",e.version="0.7.2",e.tags=["{{","}}"],e.Scanner=p,e.Context=d,e.Writer=v;var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h,p.prototype.eos=function(){return this.tail===""},p.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},d.make=function(e){return e instanceof d?e:new d(e)},d.prototype.clearCache=function(){this._cache={}},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e===".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this._cache={},this._partialCache={}},v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},v.prototype.compileTokens=function(e,t){var n=m(e),r=this;return function(e,i){if(i)if(typeof i=="function")r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,d.make(e),t)}},v.prototype.render=function(e,t,n){return this.compile(e)(t,n)},v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o)s+=r(this,t.push(i[o]));return s}return i?r(this,t.push(i)):"";case"function":var a=this,l=function(e){return a.render(e,t)},c=i.call(t.view,n,l);return c!=null?c:"";default:if(i)return r(this,t)}return""},v.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||f(r)&&r.length===0?n(this,t):""},v.prototype._partial=function(e,t){!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},v.prototype._name=function(e,t){var n=t.lookup(e);return typeof n=="function"&&(n=n.call(t.view)),n==null?"":String(n)},v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))},e.parse=function(r,u){function E(){if(m&&!w)while(v.length)d.splice(v.pop(),1);else v=[];m=!1,w=!1}r=r||"",u=u||e.tags,typeof u=="string"&&(u=u.split(n));if(u.length!==2)throw new Error("Invalid tags: "+u.join(", "));var f=b(u),c=new p(r),h=[],d=[],v=[],m=!1,w=!1,S,x,T,N;while(!c.eos()){S=c.pos,T=c.scanUntil(f[0]);if(T)for(var C=0,k=T.length;C<k;++C)N=T.charAt(C),a(N)?v.push(d.length):w=!0,d.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();S=c.pos;if(!c.scan(f[0]))break;m=!0,x=c.scan(o)||"name",c.scan(t);if(x==="=")T=c.scanUntil(i),c.scan(i),c.scanUntil(f[1]);else if(x==="{"){var L=new RegExp("\\s*"+l("}"+u[1]));T=c.scanUntil(L),c.scan(s),c.scanUntil(f[1]),x="&"}else T=c.scanUntil(f[1]);if(!c.scan(f[1]))throw new Error("Unclosed tag at "+c.pos);if(x==="/"){if(h.length===0)throw new Error('Unopened section "'+T+'" at '+S);var A=h.pop();if(A[1]!==T)throw new Error('Unclosed section "'+A[1]+'" at '+S)}var O=[x,T,S,c.pos];d.push(O);if(x==="#"||x==="^")h.push(O);else if(x==="name"||x==="{"||x==="&")w=!0;else if(x==="="){u=T.split(n);if(u.length!==2)throw new Error("Invalid tags at "+S+": "+u.join(", "));f=b(u)}}var A=h.pop();if(A)throw new Error('Unclosed section "'+A[1]+'" at '+c.pos);return g(y(d))};var w=new v;return e.clearCache=function(){return w.clearCache()},e.compile=function(e,t){return w.compile(e,t)},e.compilePartial=function(e,t,n){return w.compilePartial(e,t,n)},e.compileTokens=function(e,t){return w.compileTokens(e,t)},e.render=function(e,t,n){return w.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)},e}()),e.exports}({},{}),r=function(e,t){function n(e,t,n){this.element=e,this.width=t||e.width||parseInt(e.clientWidth),this.height=n||e.height||parseInt(e.clientHeight),this.locations=[],this.isVisible}return e.exports=t,e.exports=n,n.create=function(e,t,r){var i=new n(e,t,r);return n.getApi(i)},n.getApi=function(e){var t={};return t.element=e.element,t.isIn=e.isIn.bind(e),t.reposition=e.reposition.bind(e),t.show=e.show.bind(e),t.hide=e.hide.bind(e),Object.defineProperty(t,"width",{get:function(){return e.width}}),Object.defineProperty(t,"visible",{get:function(){return e.isVisible}}),Object.defineProperty(t,"height",{get:function(){return e.height}}),Object.defineProperty(t,"chanceMultiplier",{get:function(){return e.chanceMultiplier},set:function(t){e.chanceMultiplier=t}}),Object.defineProperty(t,"locations",{get:function(){return e.locations}}),t},n.prototype.chanceMultiplier=1,n.prototype.isIn=function(e,t,n,r){var i=this.locations.length,s;while(s=this.locations[--i])if((e<s.left&&s.left<n||s.right<n&&e<s.right)&&(t<s.top&&s.top<r||s.bottom<r&&t<s.bottom))return!0;return!1},n.prototype.reposition=function(e,t){this.element.style.left=e+"px",this.element.style.top=t+"px"},n.prototype.hide=function(){this.isVisible=!1},n.prototype.show=function(e,t){this.reposition(e,t),this.isVisible=!0},e.exports}({},{}),i=function(e,t){function s(e){n.call(this,e,parseInt(e.width),parseInt(e.height)),this.iframe=this.element.querySelector("iframe")||this.element,this.isLocal=this.iframe.contentDocument&&this.iframe.contentDocument.body&&this.iframe.contentDocument.body.innerHTML!=="",i&&this.isLocal&&(this.iframe.contentDocument.body.style.webkitTransform="translate3d(0, 0, 0)"),this.hide()}e.exports=t;var n=r;e.exports=s;var i=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;return s.prototype=Object.create(n.prototype),s.create=function(e){return e=new s(e),s.getApi(e)},s.getApi=function(e){return n.getApi(e)},s.prototype.hide=function(){n.prototype.hide.call(this),this.element.style.opacity=0,this.fidget&&(clearInterval(this.fidget),this.fidget=void 0)},s.prototype.show=function(e,t){n.prototype.show.call(this,e,t),this.element.style.opacity=1;if(i&&!this.isLocal&&!this.fidget){var r=this.iframe,s=.001,o=parseInt(r.style.height);this.fidget=setInterval(function(){r.style.opacity=1+s,s*=-1},200)}},e.exports}({},{}),s=function(e,t){function i(e){n.call(this,e,parseInt(e.width),parseInt(e.height)),this.appended}e.exports=t;var n=r;e.exports=i,i.prototype=Object.create(n.prototype),i.create=function(e){return e=new i(e),i.getApi(e)},i.getApi=function(e){return n.getApi(e)};var s=document.createDocumentFragment();return i.prototype.hide=function(){n.prototype.hide.call(this),this.element.style.display="none"},i.prototype.show=function(e,t,r){n.prototype.show.call(this,e,t),this.element.style.display="block",this.appended||(r.appendChild(this.element),this.appended=!0)},e.exports}({},{}),o=function(t,n){function o(e,t){i.call(this,e),this.player=t,this.emitter=new EventEmitter,this.lastReportedTime=0,t.addEventListener("onStateChange",this.statusChangeHandler.bind(this)),t.addEventListener("onError",this.errorHandler.bind(this)),this.hide()}t.exports=n,e;var i=r;t.exports=o;var s=function(){var e=[],t,n={};return n.add=function(n){e.push(n),e.length===1&&(t=setInterval(function(){e.forEach(function(e){var t=Math.round(e.player.getCurrentTime()),n=t-e.lastReportedTime;if(n===0)return;if(n===1)e.lastReportedTime=t,e.emitter.emit("time",t),e.emitter.emit("time:"+t);else{var r=e.lastReportedTime+1;for(;r<t;r++)e.lastReportedTime=r,e.emitter.emit("time",r),e.emitter.emit("time:"+r)}})},500))},n.remove=function(n){var r=e.indexOf(n);~r&&(e.splice(r,1),e.length===0&&clearInterval(t))},n}();return o.prototype=Object.create(i.prototype),o.create=function(e,t,n){var r=new o(e,t);return n.continuousPlay&&(r.continuousPlay=!0),n.autoplay&&(r.autoplay=!0),n.loop&&(r.loop=!0),o.getApi(r)},o.getApi=function(e){var t=i.getApi(e);return t.player=e.player,t.element=e.element,t.on=e.emitter.on.bind(e.emitter),t.removeListener=e.emitter.removeListener.bind(e.emitter),t.destroy=e.destroy.bind(e),t},o.prototype.continuousPlay=!1,o.prototype.autoplay=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!1:!0,o.prototype.loop=!1,o.prototype.playing=!1,o.prototype.errorHandler=function(e){e.data===150&&(console.log(this),this.destroy())},o.prototype.destroy=function(){this.height=0,this.width=0,this.bottom=this.top,this.left=this.right,this.element.parentNode.removeChild(this.element)},o.prototype.hide=function(){i.prototype.hide.call(this),this.element.style.opacity=0,this.continuousPlay||this.player.pauseVideo()},o.prototype.show=function(e,t){this.element.style.opacity=1,i.prototype.show.call(this,e,t),this.playing&&!this.continuousPlay?this.player.playVideo():!this.playing&&this.autoplay&&(this.playing=!0,this.player.playVideo())},o.prototype.statusChangeHandler=function(e){switch(e.data){case-1:this.emitter.emit("unstarted");break;case 0:this.emitter.emit("ended"),s.remove(this),this.loop&&(this.player.seekTo(0),this.player.playVideo());break;case 1:this.emitter.emit("playing"),s.add(this);break;case 2:this.emitter.emit("paused"),s.remove(this);break;case 3:this.emitter.emit("buffering");break;case 5:this.emitter.emit("video cued")}},t.exports}({},{}),u=function(e,t){return e.exports=t,t.Iframe=i,t.Simple=s,t.Video=o,e.exports}({},{}),a=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,n){e.exports=n,n.linear=function(e,t,n,r){return n*e/r+t},n.quadraticIn=function(e,t,n,r){return n*(e/=r)*e+t},n.quadraticOut=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},n.quadraticInOut=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},n.cubicIn=function(e,t,n,r){return n*(e/=r)*e*e+t},n.cubicOut=function(e,t,n,r){return e/=r,n*(--e*e*e+1)+t},n.cubicInOut=function(e,t,n,r){return e/=r/2,e<1?n*(e/=r)*e*e+t:n/2*((e-=2)*e*e+2)+t};var r=Math.PI/2;return n.sinusoidalIn=function(e,t,n,i){return-n*Math.cos(e/i*r)+n+t},n.sinusoidalOut=function(e,t,n,i){return n*Math.sin(e/i*r)+t},n.sinusoidalInOut=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},n.exponentialIn=function(e,t,n,r){return n*Math.pow(2,10*(e/r-1))+t},n.exponentialOut=function(e,t,n,r){return n*(-Math.pow(2,-10*e/r)+1)+t},n.exponentialInOut=function(e,n,r,i){return e/=i/2,e<1?r/2*Math.pow(2,10*(e-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},e.exports}({},{}),n=function(t,n){t.exports=n;var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},s=t.exports=function(e,t,n,s,o,u){function d(){if(h)return;h=!0,i(p),c=Date.now()}function v(){if(!h)return;h=!1,l+=Date.now()-c,p=r(m)}function m(){var i=Date.now()-l;i<o?(t[n]=e(i,a,f,o),p=r(m)):(t[n]=e(o,a,f,o),u&&u())}o=o||0;var a=t[n],f=s-a,l=Date.now(),c=l,h=!0,p;return v(),{resume:v,pause:d}},o=e,u;for(u in o)o.hasOwnProperty(u)&&(s[u]=s.bind(void 0,o[u]));return s.easing=o,t.exports}({},{});return n}(),e.exports}({},{}),n=function(e,t){e.exports=t;var n=t.noop=function(){};t.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},t.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},t.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||n;var r=document.body.style;return t.transformAttribute=r.msTransform!==void 0&&"msTransform"||r.webkitTransform!==void 0&&"webkitTransform"||r.MozTransform!==void 0&&"MozTransform"||r.transform!==void 0&&"transform",t.transitionAttribute=r.msTransition!==void 0&&"msTransition"||r.webkitTransition!==void 0&&"webkitTransition"||r.MozTransition!==void 0&&"MozTransition"||r.transition!==void 0&&"transition",t.filterAttribute=r.msFilter!==void 0&&"msFilter"||r.webkitFilter!==void 0&&"webkitFilter"||r.MozFilter!==void 0&&"MozFilter"||r.filter!==void 0&&"filter",e.exports}({},{}),r=function(t,r){t.exports=r;var i=n,s=i.requestAnimationFrame,o=i.cancelAnimationFrame,u=e,a=t.exports=function(e){this.container=e,this.element=document.createElement("div"),this.element.style.position="absolute",e.appendChild(this.element),this.refit(),this.offsetX=0,this.offsetY=0,this.speedMultiplierX=0,this.speedMultiplierY=0,this.multiStyle={},this.multiStyle[i.transformAttribute]={},this.multiStyle[i.transitionAttribute]={},this.multiStyle[i.filterAttribute]={},this.pointerEventHandler=this.pointerEventHandler.bind(this),this.step=this.step.bind(this)};return a.create=function(e){var t=new a(e);return a.getApi(t)},a.getApi=function(e){var t={};return t.start=e.start.bind(e),t.pause=e.pause.bind(e),t.refit=e.refit.bind(e),t.element=e.element,t.blur=e.setBlur.bind(e),t.grayscale=e.setGrayscale.bind(e),t.opacity=e.setOpacity.bind(e),t.speed=e.setSpeedLimit.bind(e),t.horizontalSpeed=e.setHorizontalSpeedLimit.bind(e),t.verticalSpeed=e.setVerticalSpeedLimit.bind(e),t.horizontalWind=e.setHorizontalWind.bind(e),t.verticalWind=e.setVerticalWind.bind(e),t},a.prototype.horizontalSpeedLimit=4,a.prototype.verticalSpeedLimit=4,a.prototype.horizontalWind=0,a.prototype.verticalWind=0,a.prototype.msPerStep=16,a.prototype.horizontalSpeedGradient=u.easing.quadraticIn,a.prototype.verticalSpeedGradient=u.easing.quadraticIn,a.prototype.pointerTrackingEvents=["mousemove","touchstart","touchend","touchmove"],a.prototype.start=function(){if(this.active)return;this.active=!0,this.attachPointerListeners(),this.lastStepTime=Date.now(),this.animationRequestId=s(this.step)},a.prototype.pause=function(){if(!this.active)return;this.active=!1,o(this.animationRequestId),this.detachPointerListeners()},a.prototype.step=function(){this.refit();var e=Date.now(),t=(e-this.lastStepTime)/this.msPerStep;this.lastStepTime=e,this.offsetX+=t*(this.horizontalWind+this.speedMultiplierX*this.horizontalSpeedLimit),this.offsetY+=t*(this.verticalWind+this.speedMultiplierY*this.verticalSpeedLimit),this.setCssTransform("translate",this.offsetX+"px, "+this.offsetY+"px"),this.animationRequestId=s(this.step)},a.prototype.attachPointerListeners=function(){var e=this;this.pointerTrackingEvents.forEach(function(t){e.container.addEventListener(t,e.pointerEventHandler)}),this.container.addEventListener("mousemove",e.pointerEventHandler)},a.prototype.detachPointerListeners=function(){var e=this;this.pointerTrackingEvents.forEach(function(t){e.container.removeEventListener(t,e.pointerEventHandler)})},a.prototype.pointerEventHandler=function(e){var t=e.changedTouches&&e.changedTouches[0]||e,n=t.clientX-this.left;y=t.clientY-this.top,this.speedMultiplierX=this.horizontalSpeedGradient(n-this.halfWidth,0,n>this.halfWidth?-1:1,this.halfWidth),this.speedMultiplierY=this.verticalSpeedGradient(y-this.halfHeight,0,y>this.halfHeight?-1:1,this.halfHeight)},a.prototype.refit=function(){var e=this.container.getBoundingClientRect();this.width=e.width,this.halfWidth=this.width/2,this.height=e.height,this.halfHeight=this.height/2,this.top=e.top,this.left=e.left},a.prototype.setHorizontalWind=function(e,t,n){if(!t)return this.horizontalWind=e;n=n||this.horizontalWind<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"horizontalWind",e,t)},a.prototype.setVerticalWind=function(e,t,n){if(!t)return this.verticalWind=e;n=n||this.verticalWind<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"verticalWind",e,t)},a.prototype.setSpeedLimit=function(e,t,n,r){if(!t){this.horizontalSpeedLimit=e,this.verticalSpeedLimit=e;return}this.setHorizontalSpeedLimit(e,t,n,r),this.setVerticalSpeedLimit(e,t,n)},a.prototype.setHorizontalSpeedLimit=function(e,t,n,r){if(!t)return this.horizontalSpeedLimit=e;n=n||this.horizontalSpeedLimit<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"horizontalSpeedLimit",e,t,r)},a.prototype.setVerticalSpeedLimit=function(e,t,n,r){if(!t)return this.verticalSpeedLimit=e;n=n||this.verticalSpeedLimit<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"verticalSpeedLimit",e,t,r)},a.prototype.setBlur=function(e,t){t!==void 0&&this.setCssTransition("-webkit-filter",t+"s"),this.setCssFilter("blur",e+"px")},a.prototype.setGrayscale=function(e,t){t!==void 0&&this.setCssTransition("-webkit-filter",t+"s"),this.setCssFilter("grayscale",e)},a.prototype.setOpacity=function(e,t){t!==void 0&&this.setCssTransition("opacity",t+"s"),this.element.style.opacity=e},a.prototype.setCssTransform=function(e,t){this.cssTransforms[e]=t,this.updateMultiAttributeStyle(i.transformAttribute,this.cssTransforms)},a.prototype.setCssFilter=function(e,t){this.cssFilters[e]=t,this.updateMultiAttributeStyle(i.filterAttribute,this.cssFilters)},a.prototype.setCssTransition=function(e,t){this.cssTransitions[e]=t,this.updateMultiAttributeStyle(i.transitionAttribute,this.cssTransitions,!0)},a.prototype.cssTransitions={"-webkit-filter":"0s",opacity:"0s"},a.prototype.cssFilters={blur:"0px",grayscale:"0"},a.prototype.cssTransforms={translate:"0px, 0px"},a.prototype.updateMultiAttributeStyle=function(e,t,n){var r,i=[];for(r in t)t.hasOwnProperty(r)&&i.push(r+(n?" ":"(")+t[r]+(n?"":")"));this.element.style[e]=i.join(n?", ":" ")},t.exports}({},{});return r}(),e.exports}({},{}),f=function(e,t){return e.exports=t,function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof t=="object")e(void 0,t);else if(typeof define=="function")define(e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=function(){var t={};return e(void 0,t)}}else e(void 0,Q={})}(function(e,t){"use strict";function b(e){return y(e)==="[object StopIteration]"||e instanceof w}function S(e,t){t.stack&&typeof e=="object"&&e!==null&&e.stack&&e.stack.indexOf(E)===-1&&(e.stack=x(e.stack)+"\n"+E+"\n"+x(t.stack))}function x(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!N(i)&&!T(i)&&n.push(i)}return n.join("\n")}function T(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function N(e){var t=/at .+ \((.*):(\d+):\d+\)/.exec(e);if(!t)return!1;var i=t[1],s=t[2];return i===r&&s>=n&&s<=Nt}function C(){if(Error.captureStackTrace){var e,t,n=Error.prepareStackTrace;return Error.prepareStackTrace=function(n,r){e=r[1].getFileName(),t=r[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=n,r=e,t}}function k(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function L(){function u(r){if(!e)return;n=U(r),p(e,function(e,t){o(function(){n.promiseSend.apply(n,t)})},void 0),e=void 0,t=void 0}var e=[],t=[],n,r=m(L.prototype),i=m(O.prototype);return i.promiseSend=function(r,i,s,u){var a=h(arguments);e?(e.push(a),r==="when"&&u&&t.push(u)):o(function(){n.promiseSend.apply(n,a)})},i.valueOf=function(){return e?i:n.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(i,L),i.stack=i.stack.substring(i.stack.indexOf("\n")+1)),s(i),r.promise=i,r.resolve=u,r.reject=function(e){u(R(e))},r.notify=function(n){e&&p(t,function(e,t){o(function(){t(n)})},void 0)},r}function A(e){var t=L();return st(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function O(e,t,n,r){t===void 0&&(t=function(e){return R(new Error("Promise does not support operation: "+e))});var i=m(O.prototype);return i.promiseSend=function(n,r){var s=h(arguments,2),o;try{e[n]?o=e[n].apply(i,s):o=t.apply(i,[n].concat(s))}catch(u){o=R(u)}r&&r(o)},n&&(i.valueOf=n),r&&(i.exception=r),s(i),i}function M(e){return _(e)?e.valueOf():e}function _(e){return e&&typeof e.promiseSend=="function"}function D(e){return e&&typeof e.then=="function"}function P(e){return H(e)||B(e)}function H(e){return!D(M(e))}function B(e){return e=M(e),_(e)&&"exception"in e}function q(){!I&&typeof window!="undefined"&&!window.Touch&&window.console&&console.log("Should be empty:",F),I=!0}function R(e){var t=O({when:function(t){if(t){var n=d(j,this);n!==-1&&(F.splice(n,1),j.splice(n,1))}return t?t(e):R(e)}},function(){return R(e)},function n(){return this},e);return q(),j.push(t),F.push(e),t}function U(e){if(_(e))return e;e=M(e);if(D(e)){var t=L();return e.then(t.resolve,t.reject,t.notify),t.promise}return O({when:function(){return e},get:function(t){return e[t]},put:function(t,n){return e[t]=n,e},del:function(t){return delete e[t],e},post:function(t,n){return e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},fapply:function(t){return e.apply(void 0,t)},viewInfo:function(){function r(e){n[e]||(n[e]=typeof t[e])}var t=e,n={};while(t)Object.getOwnPropertyNames(t).forEach(r),t=Object.getPrototypeOf(t);return{type:typeof e,properties:n}},keys:function(){return g(e)}},void 0,function n(){return e})}function z(e){return O({isDef:function(){}},function(){var n=h(arguments);return Y.apply(void 0,[e].concat(n))},function(){return M(e)})}function W(e,t){return e=U(e),t?O({viewInfo:function(){return t}},function(){var n=h(arguments);return Y.apply(void 0,[e].concat(n))},function(){return M(e)}):Y(e,"viewInfo")}function X(e){return W(e).when(function(t){var n;t.type==="function"?n=function(){return nt(e,void 0,arguments)}:n={};var r=t.properties||{};return g(r).forEach(function(t){r[t]==="function"&&(n[t]=function(){return tt(e,t,arguments)})}),U(n)})}function V(e,t,n,r){function u(e){try{return typeof t=="function"?t(e):e}catch(n){return R(n)}}function a(e){if(typeof n=="function"){S(e,l);try{return n(e)}catch(t){return R(t)}}return R(e)}function f(e){return typeof r=="function"?r(e):e}var i=L(),s=!1,l=U(e);return o(function(){l.promiseSend("when",function(e){if(s)return;s=!0,i.resolve(u(e))},function(e){if(s)return;s=!0,i.resolve(a(e))})}),l.promiseSend("when",void 0,void 0,function(e){i.notify(f(e))}),i.promise}function $(e,t,n){return V(e,function(e){return at(e).then(function(e){return t.apply(void 0,e)},n)},n)}function J(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return b(o)?o.value:R(o)}return V(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function K(e){throw new w(e)}function Q(e){return function(){return at([this,at(arguments)]).spread(function(t,n){return e.apply(t,n)})}}function G(e){return function(t){var n=h(arguments,1);return Y.apply(void 0,[t,e].concat(n))}}function Y(e,t){var n=L(),r=h(arguments,2);return e=U(e),o(function(){e.promiseSend.apply(e,[t,n.resolve].concat(r))}),n.promise}function Z(e,t,n){var r=L();return e=U(e),o(function(){e.promiseSend.apply(e,[t,r.resolve].concat(n))}),r.promise}function et(e){return function(t){var n=h(arguments,1);return Z(t,e,n)}}function it(e,t){var n=h(arguments,2);return nt(e,t,n)}function st(e){var t=h(arguments,1);return rt(e,t)}function ot(e,t){var n=h(arguments,2);return function(){var i=n.concat(h(arguments));return nt(e,t,i)}}function ut(e){var t=h(arguments,1);return function(){var r=t.concat(h(arguments));return rt(e,r)}}function at(e){return V(e,function(e){var t=e.length;if(t===0)return U(e);var n=L();return p(e,function(r,i,s){H(i)?(e[s]=M(i),--t===0&&n.resolve(e)):V(i,function(r){e[s]=r,--t===0&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function ft(e){return V(e,function(e){return V(at(v(e,function(e){return V(e,i,i)})),function(){return v(e,U)})})}function lt(e,t){return V(e,void 0,t)}function ct(e,t){return V(e,void 0,void 0,t)}function ht(e,t){return V(e,function(e){return V(t(),function(){return e})},function(e){return V(t(),function(){return R(e)})})}function pt(e,n,r,i){function s(n){o(function(){S(n,e);if(!t.onerror)throw n;t.onerror(n)})}var u=n||r||i?V(e,n,r,i):e;lt(u,s)}function dt(e,t){var n=L(),r=setTimeout(function(){n.reject(new Error("Timed out after "+t+" ms"))},t);return V(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise}function vt(e,t){t===void 0&&(t=e,e=void 0);var n=L();return setTimeout(function(){n.resolve(e)},t),n.promise}function mt(e,t){var n=h(t),r=L();return n.push(r.makeNodeResolver()),rt(e,n).fail(r.reject),r.promise}function gt(e){var t=h(arguments,1),n=L();return t.push(n.makeNodeResolver()),rt(e,t).fail(n.reject),n.promise}function yt(e){var t=h(arguments,1);return function(){var n=t.concat(h(arguments)),r=L();return n.push(r.makeNodeResolver()),rt(e,n).fail(r.reject),r.promise}}function bt(e,t,n){return Et(e,t).apply(void 0,n)}function wt(e,t){var n=h(arguments,2);return bt(e,t,n)}function Et(e){if(arguments.length>1){var t=arguments[1],n=h(arguments,2),r=e;e=function(){var e=n.concat(h(arguments));return r.apply(t,e)}}return function(){var t=L(),n=h(arguments);return n.push(t.makeNodeResolver()),rt(e,n).fail(t.reject),t.promise}}function St(e,t,n){var r=h(n),i=L();return r.push(i.makeNodeResolver()),tt(e,t,r).fail(i.reject),i.promise}function xt(e,t){var n=h(arguments,2),r=L();return n.push(r.makeNodeResolver()),tt(e,t,n).fail(r.reject),r.promise}function Tt(e,t){if(!t)return e;e.then(function(e){o(function(){t(null,e)})},function(e){o(function(){t(e)})})}var n=C(),r,i=function(){},s=Object.freeze||i;typeof cajaVM!="undefined"&&(s=cajaVM.def);var o;if(typeof process!="undefined")o=process.nextTick;else if(typeof setImmediate=="function")o=setImmediate;else if(typeof MessageChannel!="undefined"){var u=new MessageChannel,a={},f=a;u.port1.onmessage=function(){a=a.next;var e=a.task;delete a.task,e()},o=function(e){f=f.next={task:e},u.port2.postMessage(0)}}else o=function(e){setTimeout(e,0)};var l;if(Function.prototype.bind){var c=Function.prototype.bind;l=c.bind(c.call)}else l=function(e){return function(){return e.call.apply(e,arguments)}};var h=l(Array.prototype.slice),p=l(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),d=l(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),v=l(Array.prototype.map||function(e,t){var n=this,r=[];return p(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),m=Object.create||function(e){function t(){}return t.prototype=e,new t},g=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},y=Object.prototype.toString,w;typeof ReturnValue!="undefined"?w=ReturnValue:w=function(e){this.value=e};var E="From previous event:";t.nextTick=o,t.defer=L,L.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(h(arguments,1)):e.resolve(n)}},L.prototype.node=k(L.prototype.makeNodeResolver,"node","makeNodeResolver"),t.promise=A,t.makePromise=O,O.prototype.then=function(e,t,n){return V(this,e,t,n)},O.prototype.thenResolve=function(e){return V(this,function(){return e})},p(["isResolved","isFulfilled","isRejected","when","spread","send","get","put","del","post","invoke","keys","apply","call","bind","fapply","fcall","fbind","all","allResolved","view","viewInfo","timeout","delay","catch","finally","fail","fin","progress","end","done","nfcall","nfapply","nfbind","ncall","napply","nbind","npost","ninvoke","nend","nodeify"],function(e,n){O.prototype[n]=function(){return t[n].apply(t,[this].concat(h(arguments)))}},void 0),O.prototype.toSource=function(){return this.toString()},O.prototype.toString=function(){return"[object Promise]"},s(O.prototype),t.nearer=M,t.isPromise=_,t.isPromiseAlike=D,t.isResolved=P,t.isFulfilled=H,t.isRejected=B;var j=[],F=[],I;t.reject=R,t.begin=U,t.resolve=U,t.ref=k(U,"ref","resolve"),t.master=z,t.viewInfo=W,t.view=X,t.when=V,t.spread=$,t.async=J,t["return"]=K,t.promised=Q,t.sender=k(G,"sender","dispatcher"),t.Method=k(G,"Method","dispatcher"),t.send=k(Y,"send","dispatch"),t.dispatch=Z,t.dispatcher=et,t.get=et("get"),t.put=et("put"),t["delete"]=t.del=et("del");var tt=t.post=et("post");t.invoke=function(e,t){var n=h(arguments,2);return tt(e,t,n)};var nt=t.apply=k(et("apply"),"apply","fapply"),rt=t.fapply=et("fapply");t.call=k(it,"call","fcall"),t["try"]=st,t.fcall=st,t.bind=k(ot,"bind","fbind"),t.fbind=ut,t.keys=et("keys"),t.all=at,t.allResolved=ft,t["catch"]=t.fail=lt,t.progress=ct,t["finally"]=t.fin=ht,t.end=k(pt,"end","done"),t.done=pt,t.timeout=dt,t.delay=vt,t.nfapply=mt,t.nfcall=gt,t.nfbind=yt,t.napply=k(bt,"napply","npost"),t.ncall=k(wt,"ncall","ninvoke"),t.nbind=k(Et,"nbind","nfbind"),t.npost=St,t.ninvoke=xt,t.nend=k(Tt,"nend","nodeify"),t.nodeify=Tt;var Nt=C()}),e.exports}({},{}),l=function(e,t){e.exports=t;var n=f,r=s,i=document.createDocumentFragment();return e.exports=function(e,t){var s=n.defer(),o=new Image;return o.src=t,o.onload=function(){i.appendChild(o),s.resolve(new r(o))},o.onerror=s.reject.bind(s),s.promise},e.exports}({},{}),c=function(e,t){function h(e){function t(e){return e.results.map(function(e){element=document.createElement("div"),element.className="nytimes-article",e.byline&&(u[e.byline.replace("By ","")]=e.url);var t={title:e.title,byline:e.byline,date:(new Date(e.publication_year,e.publication_month,e.publication_day)).toLocaleDateString(),body:e.body,url:e.url};return e.small_image_url&&(t.image={src:e.small_image_url.replace(/thumbStandard.*\./,"hpMedium."),height:253,width:337}),element.innerHTML=o.render(a,t),document.body.appendChild(element),element.width=element.clientWidth,element.height=element.clientHeight,l.appendChild(element),new i(element)})}return e.data?r.when(t(e.data)):p(e).then(function(e){return t(e)})}function p(e){var t=r.defer(),n=["format=json","fields=publication_year,publication_month,publication_day,body,date,title,url,byline,small_image_url,small_image_height,small_image_width","api-key=af04c123c8988a12245668f5b5fa4f4c:8:67325739","query="+e.query],i=new XMLHttpRequest;return i.onload=function(){t.resolve(JSON.parse(this.responseText))},i.onerror=function(){t.reject()},i.open("get",c+"?"+n.join("&"),!0),i.send(),t.promise}e.exports=t;var r=f,i=s,o=n;window.credits=window.credits||{};var u=window.credits.nyTimes={},a='<h2><a href="{{url}}">{{{title}}}</a></h2>{{#image}}<img class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/>{{/image}}<div class="article-attribution"><img class="nyt-brand" src="http://graphics8.nytimes.com/packages/images/developer/logos/poweredby_nytimes_30a.png"/><span class="byline">{{{byline}}}</span><span class="date">{{date}}</span></div><p>{{{body}}}</p>',l=document.createDocumentFragment(),c="/svc/search/v1/article";return e.exports=function(e,t){return h(t)},e.exports}({},{}),h=function(e,t){e.exports=t;var n=f;return window.API_CALLBACKS={},e.exports=function(){var e=0,t=window.API_CALLBACKS,r=1e4;return function(i,s,o,u){var a="c"+e++,f=n.defer(),l=document.createElement("script"),c;return typeof s!="string"&&(u=o,o=s,s="callback"),u=u||r,o=o||[],o.push(s+"=API_CALLBACKS."+a),c=setTimeout(function(){f.reject("timeout")},u),t[a]=function(e){clearTimeout(c),delete t[a],f.resolve(e)},l.async=!0,l.src=i+"?"+o.join("&"),document.body.appendChild(l),f.promise}}(),e.exports}({},{}),p=function(e,t){e.exports=t;var r=f,i=n,o=h,u=s;window.credits=window.credits||{};var a=window.credits.googlePlus={};e.exports=function(e,t){return p(t)};var l='<div class="article-wrapper"><div class="post-attribution"><a href="{{authorUrl}}">{{#authorImage}}<img class="author-image" src="{{authorImage.src}}" width="{{authorImage.width}}" height="{{authorImage.height}}"/>{{/authorImage}}<span class="author-name">{{authorName}}</span></a><span class="post-date">on Google Plus &ndash; {{date}}</span></div><p class="author-comments">{{{authorComments}}}</p><div class="article"><a href="{{articleUrl}}">{{#image}}<img class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/>{{/image}}<div class="article-attribution"><span>{{title}}</span></div></a><p class="article-body">{{body}}</p></div></div>',c=document.createDocumentFragment(),p=function(){var e="https://www.googleapis.com/plus/v1/activities";return function(t){var n=["key=AIzaSyAZw0kviWeCOidthcZAYs5oCZ0k8DsOuUk","query="+encodeURIComponent(t)];return o(e,n).then(function(e){var t=[];return e.items.forEach(function(e){if(!(e&&e.object&&e.object.attachments&&e.object.attachments.length>0))return;var n=e.object.attachments[0];if(n.objectType!=="article")return;var r=e.object.actor||e.actor,s=e.object.content;s&&s.length>150&&(s=s.substr(0,150)+"&hellip;");var o={authorName:r.displayName,authorUrl:r.url,authorId:r.id,date:(new Date(e.published)).toLocaleDateString(),authorComments:s,articleUrl:n.url,title:n.displayName,body:n.content};r.image&&(o.authorImage={src:r.image.url,width:50,height:50}),n.image&&(o.image={src:n.image.url,width:n.image.width,height:n.image.height});var a=document.createElement("div");a.className="gplus-article",a.innerHTML=i.render(l,o),document.body.appendChild(a),a.width=a.clientWidth,a.height=a.clientHeight,t.push(new u(a)),c.appendChild(a)}),t})}}();return e.exports}({},{}),d=function(t,n){t.exports=n,e;var r=f,i=o,s=h,u=1e4;window.credits=window.credits||{};var a=window.credits.youtube={};t.exports=function(e,t){if(t.query)return c(t).then(function(n){return t.videoIds=n,p(e,t)});if(t.videoId)return t.videoIds=[t.videoId],p(e,t).then(function(e){return e[0]});if(t.videoIds)return p(e,t)};var l={duration:"short",key:"AIzaSyAZw0kviWeCOidthcZAYs5oCZ0k8DsOuUk"},c=function(){var e="https://d3ggoqbhpexke2.cloudfront.net/youtube/v3/search";return function(t){utils.extend(t,l);var n=["part=id,snippet","videoDuration="+t.duration,"type=video","videoEmbeddable=true","videoSyndicated=true","key="+t.key,"q="+encodeURIComponent(t.query)];return s(e,n).then(function(e){var t=[];return e.items.forEach(function(e){a[e.snippet.channelTitle]="http://youtube.com/"+e.snippet.channelTitle,t.push(e.id.videoId)}),t})}}(),p=function(){return function(e,t){if(!Array.isArray(t.videoIds))return;var n=t.videoIds.length,i=r.defer(),s=[],o,a=!1,f=setTimeout(function(){a=!0,i.resolve(s)},u);t.callback=function(e){if(a||!e)return;s.push(e),s.length===t.videoIds.length&&(clearTimeout(f),i.resolve(s))};while(n--)o=Object.create(t),o.videoId=t.videoIds[n],v(e,o);return i.promise}}(),d=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,v=function(){var e=0;return function(t,n){var r=n.videoId,s=n.width||1060,o=n.height||650,u="player"+e++,a=document.createElement("div");a.width=s,a.height=o,a.className="youtube-video",d&&(a.className+=" hide-video-mask"),a.innerHTML='<div id="'+u+'"></div><div class="video-mask"></div>',t.element.appendChild(a);var f;new YT.Player(u,{height:o,width:s,playerVars:{controls:0,html5:1,start:n.startTime||0},videoId:r,events:{onReady:function(e){var t=e.target;f=i.create(a,t,{continuousPlay:n.continuousPlay,autoplay:n.autoplay,loop:n.loop}),d&&(f.on("playing",function(){a.className=a.className.replace(" hide-video-mask","")}),f.on("paused",function(){a.className+=" hide-video-mask"})),t.pauseVideo(),n.continuousPlay&&(t.unMute(),t.setVolume(100)),n.mute&&(t.mute(),t.setVolume(0)),n.callback&&n.callback(f)},onError:function(e){}}})}}();return t.exports}({},{}),v=function(e,t){e.exports=t;var r=f,i=n,o=h,u=s;window.credits=window.credits||{};var a=window.credits.googleNews={};e.exports=function(e,t){return p(t)};var l='<div class="article-wrapper">{{#image}}<a href="{{image.contextUrl}}"><img title="Image by {{image.publisher}}" class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/></a>{{/image}}<a class="article-title" href="{{sourceUrl}}">{{{title}}}</a><p class="article-attribution"><span class="article-publisher">{{{publisher}}}</span> &ndash; <span class="article-date">{{date}}</span> via {{#gnewsUrl}}<a class="article-via" href="{{gnewsUrl}}">{{/gnewsUrl}}Google News{{#gnewsUrl}}</a>{{/gnewsUrl}}</p><p class="article-body">{{{body}}}</p></div>',c=document.createDocumentFragment(),p=function(){var e="/ajax/services/search/news";return function(t){var n=["v=1.0","rsz=8","q="+encodeURIComponent(t)];return o(e,n).then(function(e){var t=[];return e.responseData.results.forEach(function(e){a[e.publisher]=e.unescapedUrl;var n={title:e.titleNoFormatting,sourceUrl:e.unescapedUrl,publisher:e.publisher,date:(new Date(e.publishedDate)).toLocaleDateString(),gnewsUrl:e.clusterUrl,body:e.content};e.image&&(n.image={src:e.image.tbUrl,width:e.image.tbWidth,height:e.image.tbHeight,publisher:e.image.publisher,contextUrl:e.image.originalContextUrl});var r=document.createElement("div");r.className="gnews-article",r.innerHTML=i.render(l,n),document.body.appendChild(r),r.width=r.clientWidth,r.height=r.clientHeight,t.push(new u(r)),c.appendChild(r)}),t})}}();return e.exports}({},{}),m=function(e,t){function n(){this.elements=[]}return e.exports=t,e.exports=n,n.create=function(e){e=e||{};var t=new n;return"skipProbability"in e&&(t.skipProbability=e.skipProbability),"tryLimit"in e&&(t.tryLimit=e.tryLimit),t},n.prototype.chanceMultiplier=1,n.prototype.skipProbability=0,n.prototype.add=function(e){var t=e.chanceMultiplier;while(t--)this.elements.push(e)},n.prototype.remove=function(e){var t;while(~(t=this.elements.indexOf(e)))this.elements.splice(t,1)},n.prototype.getElements=function(){return this.elements.slice()},n.prototype.getRandomElement=function(){return this.elements[Math.random()*this.elements.length|0]},e.exports}({},{}),g=function(e,t){e.exports=t;var n=e.exports=function(e,t,n){this.element=e,this.top=n||0,this.left=t||0,this.width=this.element.width,this.height=this.element.height,this.bottom=this.top+this.height,this.right=this.left+this.width,e.locations.push(this)};return n.prototype.show=function(e){if(this.visible)return;this.visible=!0,this.element.show(this.left,this.top,e)},n.prototype.hide=function(e){if(!this.visible)return;this.visible=!1,this.element.hide(e)},e.exports}({},{}),b=function(e,t){e.exports=t,t.extend=function(e,t){var n=arguments.length,r=1,i,s;for(;r<n;r++){i=arguments[r];for(s in i)i.hasOwnProperty(s)&&!(s in e)&&(e[s]=i[s])}},t.attachIframeToCollage=function(e,t,n,r){var i=document.createElement("div");i.className="iframe-container";var s=document.createElement("div");s.className="iframe-overflow-wrapper",s.style.width=n+"px",s.style.height=r+"px",i.appendChild(s),t.style.width=n+"px",t.style.height=r+"px",s.appendChild(t);var o=document.createElement("div");o.className="iframe-mask",i.appendChild(o);var u=!1;return o.addEventListener("click",function(t){u=!0,i.className+=" in-focus",e.pause(.4)}),o.addEventListener("mouseover",function(t){if(!u)return;u=!1,i.className=i.className.replace(" in-focus",""),e.resume(.4)}),e.element.appendChild(i),i},t.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},t.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},t.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||function(){};var n=document.body.style;return t.transitionAttribute=n.msTransition!==void 0&&"msTransition"||n.webkitTransition!==void 0&&"webkitTransition"||n.MozTransition!==void 0&&"MozTransition"||n.transition!==void 0&&"transition",e.exports}({},{}),w=function(e,t){function c(e,t){var s=n.defer(),f;return typeof t=="string"&&(t={tags:t}),i.extend(t,l),f=["format=json","method=flickr.photos.search","extras=url_z,url_m,path_alias","api_key="+t.apiKey,"license="+t.license,"sort="+t.sort,"tag_mode="+t.tagMode,"per_page="+t.count,"content_type="+t.contentType,"media="+t.media,"tags="+t.tags],t.isCommons&&f.push("is_commons="+t.isCommons),o(a,"jsoncallback",f).then(function(e){var t=[],n=e.photos&&e.photos.photo||[],i=n.length;n.forEach(function(e){var n=e.url_z||e.url_m;if(!n){i--;return}d(e.url_z||e.url_m).then(function(n){var o=document.createElement("a");o.href="http://www.flickr.com/photos/"+e.pathalias+"/"+e.id+"/",o.width=n.width,o.height=n.height,o.target="_blank",o.style.display="block",o.appendChild(n),u[e.pathalias]=o.href,t.push(r.create(o)),--i===0&&s.resolve(t)},function(){--i===0&&s.resolve(t)})})}),s.promise}function d(e){var t=n.defer(),r=new Image;return r.src=e,r.onload=function(){p.appendChild(r),t.resolve(r)},r.onerror=t.reject.bind(t),t.promise}e.exports=t;var n=f,r=s,i=b,o=h;window.credits=window.credits||{};var u=window.credits.flickr={},a="/services/rest/";e.exports=c;var l={sort:"relevance",count:"20",license:"1,2,3,4,5,6,7,8",apiKey:"06960d3c3c8affd01e65ec032513557b",media:"photos",tagMode:"all",isCommons:!1,contentType:"1"},p=document.createDocumentFragment();return e.exports}({},{}),E=function(e,t){e.exports=t;var n=f,r=h,s=b,o=i,u=1e4;window.credits=window.credits||{};var a=window.credits.twitter={};e.exports=function(e,t){var n=e.element;if(t.query)return c(t.query).then(function(t){return l(t,n,e)});if(t.ids)return l(t.ids,n,e);if(t.id)return l([t.id],n,e).then(function(e){if(e&&e.length)return e[0]})};var l=function(){return function(e,t,r){function c(){var t=l.length,n;while(t--)n=l[t],n.height!=="0"&&n.width!=="0"&&(a.push(o.create(n)),a.length===e.length&&(clearTimeout(timeout),clearInterval(h),s.resolve(a)),l.splice(t,1))}if(!Array.isArray(e)||!t)return;var i=e.length,s=n.defer(),a=[],f=!1,l=[];timeout=setTimeout(function(){f=!0,clearInterval(h),s.resolve(a)},u);var h=setInterval(c,250);while(i--)twttr.widgets.createTweet(e[i],t,function(e){if(f)return;var t="contentWindow"in e?e.contentWindow:e.contentDocument.defaultView,n=t.onresize,r=t.onmousemove;t.onmousemove=function(t){r&&r(t);var n=document.createEvent("MouseEvents"),i=e.getBoundingClientRect();n.initMouseEvent("mousemove",!0,!1,window,t.detail,t.screenX,t.screenY,t.clientX+i.left,t.clientY+i.top,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,null),e.dispatchEvent(n)},l.push(e),e.style.opacity=0});return s.promise}}(),c=function(){var e="/search.json";return function(t){return r(e,["format=json","q="+encodeURIComponent(t)]).then(function(e){var n=[],r=[];return e.results.forEach(function(e){if(~r.indexOf(e.text))return;r.push(e.text);if(~e.from_user.toLowerCase().indexOf(t.toLowerCase()))return;a[e.from_user]="http://twitter.com/"+e.from_user,n.push(e.id_str)}),n})}}();return e.exports}({},{}),S=function(e,t){e.exports=t;var n=f,r=i,s=b;return e.exports=function(e,t){var i=t.width||500,o=t.height||500,u=document.createElement("iframe");u.src=t.url;var a=s.attachIframeToCollage(e,u,i,o);return n.when(new r(a))},e.exports}({},{}),x=function(e,t){function p(e,t){u.extend(t,d),params=["limit="+t.limit,"restrict_sr="+t.restrict_sr,"sort="+t.sort,"t="+t.time,"q="+t.query];var r,i=this,r=document.createElement("IFRAME"),s,a,f=u.attachIframeToCollage(e,r,t.width,t.height);return s=r.contentDocument?r.contentDocument:r.contentWindow.document,a="<html><head><title></title></head><body>",a+='<script type="text/javascript" src="http://www.reddit.com/r/'+t.subreddit+"/search.embed?"+params.join("&").replace(" ","%20")+'"></script>',a+="</body></html>",s.open(),s.write(a),s.close(),n.when(new o(f))}function v(e,t){var i=n.defer(),s;return typeof t=="string"&&(t={tags:t}),u.extend(t,d),s=["limit="+t.limit,"restrict_sr="+t.restrict_sr,"sort="+t.sort,"t="+t.time,"q="+t.query],a(c,"jsonp",s).then(function(e){var n=[],s=e.data&&e.data.children||[],o;s=s.filter(function(e){return e=e.data,e.score<t.minScore||e.num_comments<t.minComments||!~e.url.indexOf(".jpg")?!1:!0}),o=s.length,s.forEach(function(e){e=e.data,l[e.author]="http://www.reddit.com"+e.permalink,g(e.url).then(function(t){var s=document.createElement("a");s.href="http://www.reddit.com"+e.permalink,s.width=t.width,s.height=t.height,s.target="_blank",s.style.display="block",s.appendChild(t),n.push(r.create(s)),--o===0&&i.resolve(n)},function(){--o===0&&i.resolve(n)})})}),i.promise}function g(e){var t=n.defer(),r=new Image;return r.src=e,r.onload=function(){m.appendChild(r),t.resolve(r)},r.onerror=t.reject.bind(t),t.promise}e.exports=t;var n=f,r=s,o=i,u=b,a=h;window.credits=window.credits||{};var l=window.credits.reddit={},c="/r/all/search.json";e.exports=function(e,t){return t.type==="embed"?p(e,t):v(e,t)};var d={limit:"20",subreddit:"all",restrict_sr:"false",sort:"top",time:"all",nsfw:"false",minComments:0,width:500,height:600,minScore:0},m=document.createDocumentFragment();return e.exports}({},{}),T=function(e,t){function m(e,t){a.extend(t,v);var n=t.ids,i=r.when(n);return t.query?s(l,["type=page","fields=name,link,likes,category","limit="+t.limit,"q="+encodeURIComponent(t.query)]).then(function(r){return r.data.forEach(function(e){if(e.likes<t.minLikes)return;c[e.name]=e.link,n.push(e.id)}),g(e,n,t)}):r.when(g(e,n,t))}function g(e,t,n){var r=[];return t.forEach(function(t){var i=document.createElement("div");i.className="fb-like-box",i.setAttribute("data-href","http://www.facebook.com/"+t),i.setAttribute("data-width",n.width),i.setAttribute("data-height",n.height),i.setAttribute("data-show-faces",n.showFaces),i.setAttribute("data-stream",n.showStream),i.setAttribute("data-header",n.showHeader);var s=a.attachIframeToCollage(e,i,n.width,n.height);FB.XFBML.parse(s),r.push(new o(s))}),r}e.exports=t;var r=f,s=h,o=i,u=n,a=b,l="/search";window.credits=window.credits||{};var c=window.credits.facebook={};e.exports=function(e,t){switch(t.type){case"pages":return m(e,t)}};var p='<div class="fb-activity" data-site="www.hrc.org" data-width="{{width}}" data-height="{{height}}" data-header="false" data-recommendations="false"></div>',d='<div class="fb-like-box" data-href="http://www.facebook.com/{{id}}" data-width="{{width}}" data-height="{{height}}" data-show-faces="true" data-stream="false" data-header="false"></div>',v={limit:3,width:400,height:600,minLikes:0,showFaces:!0,showStream:!0,showHeader:!1,ids:[]};return e.exports}({},{}),N=function(e,t){return e.exports=t,t.flickr=w,t.image=l,t.youtube=d,t.googlePlus=p,t.googleNews=v,t.nyTimes=c,t.twitter=E,t.facebook=T,t.iframe=S,t.reddit=x,e.exports}({},{}),C=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,t){return e.exports=t,function(t){"use strict";function r(){if(n.READY)return;n.event.determineEventTypes();for(var e in n.gestures)n.gestures.hasOwnProperty(e)&&n.detection.register(n.gestures[e]);n.event.onTouch(document,n.EVENT_MOVE,n.detection.detect),n.event.onTouch(document,n.EVENT_END,n.detection.endDetect),n.READY=!0}var n=function(e,t){return new n.Instance(e,t||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in t,n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.POINTER_MOUSE="mouse",n.POINTER_TOUCH="touch",n.POINTER_PEN="pen",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.plugins={},n.READY=!1,n.Instance=function(e,t){var i=this;return r(),this.element=e,this.enabled=!0,this.options=n.utils.extend(n.utils.extend({},n.defaults),t||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),n.event.onTouch(e,n.EVENT_START,function(e){i.enabled&&n.detection.startDetect(i,e)}),this},n.Instance.prototype={on:function(t,n){var r=t.split(" ");for(var i=0;i<r.length;i++)this.element.addEventListener(r[i],n,!1);return this},off:function(t,n){var r=t.split(" ");for(var i=0;i<r.length;i++)this.element.removeEventListener(r[i],n,!1);return this},trigger:function(t,n){var r=document.createEvent("Event");return r.initEvent(t,!0,!0),r.gesture=n,this.element.dispatchEvent(r),this},enable:function(t){return this.enabled=t,this}};var i=null,s=!1,o=!1;n.event={bindDom:function(e,t,n){var r=t.split(" ");for(var i=0;i<r.length;i++)e.addEventListener(r[i],n,!1)},onTouch:function(t,r,u){var a=this;this.bindDom(t,n.EVENT_TYPES[r],function(e){var f=e.type.toLowerCase();if(f.match(/mouseup/)&&o){o=!1;return}if(f.match(/touch/)||f.match(/mouse/)&&e.which===1||n.HAS_POINTEREVENTS&&f.match(/down/))s=!0;f.match(/touch|pointer/)&&(o=!0),s&&(!o||!f.match(/mouse/))&&(n.HAS_POINTEREVENTS&&r!=n.EVENT_END&&n.PointerEvent.updatePointer(r,e),r===n.EVENT_END&&i!==null?e=i:i=e,u.call(n.detection,a.collectEventData(t,r,e)),n.HAS_POINTEREVENTS&&r==n.EVENT_END&&n.PointerEvent.updatePointer(r,e)),f.match(/up|cancel|end/)&&(s=!1,i=null,n.PointerEvent.reset())})},determineEventTypes:function(){var t;n.HAS_POINTEREVENTS?t=n.PointerEvent.getEvents():t=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],n.EVENT_TYPES[n.EVENT_START]=t[0],n.EVENT_TYPES[n.EVENT_MOVE]=t[1],n.EVENT_TYPES[n.EVENT_END]=t[2]},getTouchList:function(t){return n.HAS_POINTEREVENTS?n.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,r,i){var s=this.getTouchList(i,r),o=n.POINTER_TOUCH;if(i.type.match(/mouse/)||n.PointerEvent.matchType(n.POINTER_MOUSE,i))o=n.POINTER_MOUSE;return{center:n.utils.getCenter(s),timestamp:i.timestamp||(new Date).getTime(),target:i.target,touches:s,eventType:r,pointerType:o,srcEvent:i,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return n.detection.stopDetect()}}}},n.PointerEvent={pointers:{},getTouchList:function(){var e=this.pointers,t=[];return Object.keys(e).sort().forEach(function(n){t.push(e[n])}),t},updatePointer:function(e,t){e==n.EVENT_END?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var r={};return r[n.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==n.POINTER_MOUSE,r[n.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==n.POINTER_TOUCH,r[n.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==n.POINTER_PEN,r[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},n.utils={extend:function(t,n){for(var r in n)t[r]=n[r];return t},getCenter:function(t){var n=[],r=[];for(var i=0,s=t.length;i<s;i++)n.push(t[i].pageX),r.push(t[i].pageY);return{pageX:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2,pageY:(Math.min.apply(Math,r)+Math.max.apply(Math,r))/2}},getVelocity:function(t,n,r){return{x:Math.abs(n/t)||0,y:Math.abs(r/t)||0}},getAngle:function(t,n){var r=n.pageY-t.pageY,i=n.pageX-t.pageX;return Math.atan2(r,i)*180/Math.PI},getDirection:function(t,r){var i=Math.abs(t.pageX-r.pageX),s=Math.abs(t.pageY-r.pageY);return i>=s?t.pageX-r.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:t.pageY-r.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(t,n){var r=n.pageX-t.pageX,i=n.pageY-t.pageY;return Math.sqrt(r*r+i*i)},getScale:function(t,n){return t.length>=2&&n.length>=2?this.getDistance(n[0],n[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,n){return t.length>=2&&n.length>=2?this.getAngle(n[1],n[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==n.DIRECTION_UP||t==n.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,n){var r,i=["webkit","khtml","moz","ms","o",""];if(!n||!t.style)return;for(var s=0;s<i.length;s++)for(var o in n)n.hasOwnProperty(o)&&(r=o,i[s]&&(r=i[s]+r.substring(0,1).toUpperCase()+r.substring(1)),t.style[r]=n[o]);n.userSelect=="none"&&(t.onselectstart=function(){return!1})}},n.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,r){if(this.current)return;this.stopped=!1,this.current={inst:t,startEvent:n.utils.extend({},r),lastEvent:!1,name:""},this.detect(r)},detect:function(t){if(!this.current||this.stopped)return;t=this.extendEventData(t);var n=this.current.inst.options;for(var r=0,i=this.gestures.length;r<i;r++){var s=this.gestures[r];if(!this.stopped&&n[s.name]!==!1&&s.handler.call(s,t,this.current.inst)===!1){this.stopDetect();break}}this.current&&(this.current.lastEvent=t)},endDetect:function(t){this.detect(t),this.stopDetect()},stopDetect:function(){this.previous=n.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var r=this.current.startEvent;if(r&&(t.touches.length!=r.touches.length||t.touches===r.touches)){r.touches=[];for(var i=0,s=t.touches.length;i<s;i++)r.touches.push(n.utils.extend({},t.touches[i]))}var o=t.timestamp-r.timestamp,u=t.center.pageX-r.center.pageX,a=t.center.pageY-r.center.pageY,f=n.utils.getVelocity(o,u,a);return n.utils.extend(t,{deltaTime:o,deltaX:u,deltaY:a,velocityX:f.x,velocityY:f.y,distance:n.utils.getDistance(r.center,t.center),angle:n.utils.getAngle(r.center,t.center),direction:n.utils.getDirection(r.center,t.center),scale:n.utils.getScale(r.touches,t.touches),rotation:n.utils.getRotation(r.touches,t.touches),startEvent:r}),t},register:function(t){var r=t.defaults||{};return typeof r[t.name]=="undefined"&&(r[t.name]=!0),n.utils.extend(n.defaults,r),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},n.gestures=n.gestures||{},n.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,r){switch(t.eventType){case n.EVENT_START:clearTimeout(this.timer),n.detection.current.name=this.name,this.timer=setTimeout(function(){n.detection.current.name=="hold"&&r.trigger("hold",t)},r.options.hold_timeout);break;case n.EVENT_MOVE:t.distance>r.options.hold_threshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function(t,r){if(t.eventType==n.EVENT_END){var i=n.detection.previous;if(t.deltaTime>r.options.tap_max_touchtime||t.distance>r.options.tap_max_distance)return;i&&i.name=="tap"&&t.timestamp-i.lastEvent.timestamp<r.options.doubletap_interval&&t.distance<r.options.doubletap_distance?n.detection.current.name="doubletap":n.detection.current.name="tap",r.trigger(n.detection.current.name,t)}}},n.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,r){if(t.eventType==n.EVENT_END){if(r.options.swipe_max_touches>0&&t.touches.length>r.options.swipe_max_touches)return;if(t.velocityX>r.options.swipe_velocity||t.velocityY>r.options.swipe_velocity)r.trigger(this.name,t),r.trigger(this.name+t.direction,t)}}},n.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1},triggered:!1,handler:function(t,r){if(n.detection.current.name!=this.name&&this.triggered){r.trigger(this.name+"end",t),this.triggered=!1;return}if(r.options.drag_max_touches>0&&t.touches.length>r.options.drag_max_touches)return;switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:if(t.distance<r.options.drag_min_distance&&n.detection.current.name!=this.name)return;n.detection.current.name=this.name;var i=n.detection.current.lastEvent.direction;r.options.drag_lock_to_axis&&i!==t.direction&&(n.utils.isVertical(i)?t.direction=t.deltaY<0?n.DIRECTION_UP:n.DIRECTION_DOWN:t.direction=t.deltaX<0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),this.triggered||(r.trigger(this.name+"start",t),this.triggered=!0),r.trigger(this.name,t),r.trigger(this.name+t.direction,t),(r.options.drag_block_vertical&&n.utils.isVertical(t.direction)||r.options.drag_block_horizontal&&!n.utils.isVertical(t.direction))&&t.preventDefault();break;case n.EVENT_END:this.triggered&&r.trigger(this.name+"end",t),this.triggered=!1}}},n.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,r){if(n.detection.current.name!=this.name&&this.triggered){r.trigger(this.name+"end",t),this.triggered=!1;return}if(t.touches.length<2)return;r.options.transform_always_block&&t.preventDefault();switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:var i=Math.abs(1-t.scale),s=Math.abs(t.rotation);if(i<r.options.transform_min_scale&&s<r.options.transform_min_rotation)return;n.detection.current.name=this.name,this.triggered||(r.trigger(this.name+"start",t),this.triggered=!0),r.trigger(this.name,t),s>r.options.transform_min_rotation&&r.trigger("rotate",t),i>r.options.transform_min_scale&&(r.trigger("pinch",t),r.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case n.EVENT_END:this.triggered&&r.trigger(this.name+"end",t),this.triggered=!1}}},n.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1},handler:function(t,r){r.options.prevent_default&&t.preventDefault(),t.eventType==n.EVENT_START&&r.trigger(this.name,t)}},n.gestures.Release={name:"release",index:Infinity,handler:function(t,r){t.eventType==n.EVENT_END&&r.trigger(this.name,t)}},typeof e=="object"&&typeof e.exports=="object"?e.exports=n:(t.Hammer=n,typeof t.define=="function"&&t.define.amd&&t.define("hammer",[],function(){return n}))}(this),e.exports}({},{}),n=function(e,t){return e.exports=t,function(e){"use strict";function t(){}function i(e,t){if(r)return t.indexOf(e);var n=t.length;while(n--)if(t[n]===e)return n;return-1}var n=t.prototype,r=Array.prototype.indexOf?!0:!1;n._getEvents=function(){return this._events||(this._events={})},n.getListeners=function(e){var t=this._getEvents();return t[e]||(t[e]=[])},n.addListener=function(e,t){var n=this.getListeners(e);return i(t,n)===-1&&n.push(t),this},n.on=n.addListener,n.removeListener=function(e,t){var n=this.getListeners(e),r=i(t,n);return r!==-1&&(n.splice(r,1),n.length===0&&this.removeEvent(e)),this},n.off=n.removeListener,n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if(typeof t=="object")for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&(typeof i=="function"?s.call(this,r,i):o.call(this,r,i));else{r=n.length;while(r--)s.call(this,t,n[r])}return this},n.removeEvent=function(e){return e?delete this._getEvents()[e]:delete this._events,this},n.emitEvent=function(e,t){var n=this.getListeners(e),r=n.length,i;while(r--)i=t?n[r].apply(null,t):n[r](),i===!0&&this.removeListener(e,n[r]);return this},n.trigger=n.emitEvent,n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},typeof define=="function"&&define.amd?define(function(){return t}):e.EventEmitter=t}(this),e.exports}({},{}),r=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,n){e.exports=n,n.linear=function(e,t,n,r){return n*e/r+t},n.quadraticIn=function(e,t,n,r){return n*(e/=r)*e+t},n.quadraticOut=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},n.quadraticInOut=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},n.cubicIn=function(e,t,n,r){return n*(e/=r)*e*e+t},n.cubicOut=function(e,t,n,r){return e/=r,n*(--e*e*e+1)+t},n.cubicInOut=function(e,t,n,r){return e/=r/2,e<1?n*(e/=r)*e*e+t:n/2*((e-=2)*e*e+2)+t};var r=Math.PI/2;return n.sinusoidalIn=function(e,t,n,i){return-n*Math.cos(e/i*r)+n+t},n.sinusoidalOut=function(e,t,n,i){return n*Math.sin(e/i*r)+t},n.sinusoidalInOut=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},n.exponentialIn=function(e,t,n,r){return n*Math.pow(2,10*(e/r-1))+t},n.exponentialOut=function(e,t,n,r){return n*(-Math.pow(2,-10*e/r)+1)+t},n.exponentialInOut=function(e,n,r,i){return e/=i/2,e<1?r/2*Math.pow(2,10*(e-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},e.exports}({},{}),n=function(t,n){t.exports=n;var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},s=t.exports=function(e,t,n,s,o,u){function d(){if(h)return;h=!0,i(p),c=Date.now()}function v(){if(!h)return;h=!1,l+=Date.now()-c,p=r(m)}function m(){var i=Date.now()-l;i<o?(t[n]=e(i,a,f,o),p=r(m)):(t[n]=e(o,a,f,o),u&&u())}o=o||0;var a=t[n],f=s-a,l=Date.now(),c=l,h=!0,p;return v(),{resume:v,pause:d}},o=e,u;for(u in o)o.hasOwnProperty(u)&&(s[u]=s.bind(void 0,o[u]));return s.easing=o,t.exports}({},{});return n}(),e.exports}({},{}),i=function(e,t){e.exports=t;var n=t.noop=function(){};t.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},t.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},t.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||n;var r=document.body.style;return t.transformAttribute=r.msTransform!==void 0&&"msTransform"||r.webkitTransform!==void 0&&"webkitTransform"||r.MozTransform!==void 0&&"MozTransform"||"transform",t.transitionAttribute=r.msTransition!==void 0&&"msTransition"||r.webkitTransition!==void 0&&"webkitTransition"||r.MozTransition!==void 0&&"MozTransition"||"transition",t.filterAttribute=r.msFilter!==void 0&&"msFilter"||r.webkitFilter!==void 0&&"webkitFilter"||r.MozFilter!==void 0&&"MozFilter"||"filter",t.cssFilterAttribute=r.msFilter!==void 0&&"-ms-filter"||r.webkitFilter!==void 0&&"-webkit-filter"||r.MozFilter!==void 0&&"-moz-filter"||"filter",t.cssTransformAttribute=r.msTransform!==void 0&&"-ms-transform"||r.webkitTransform!==void 0&&"-webkit-transform"||r.MozTransform!==void 0&&"-moz-transform"||"filter",e.exports}({},{}),s=function(t,s){function p(e){e.preventDefault()}t.exports=s,n;var o=e,u="ontouchstart"in document.documentElement,a=i,f=a.requestAnimationFrame,l=a.cancelAnimationFrame,c=r,h=t.exports=function(e){this.container=e,this.element=document.createElement("div"),this.element.style.position="absolute",e.appendChild(this.element),this.refit(),this.emitter=new EventEmitter,this.horizontalPosition=0,this.verticalPosition=0,this.horizontalVelocity=0,this.verticalVelocity=0,this.cssTransitions={},this.cssFilters={},this.cssTransforms={},this.pointerEventHandler=this.pointerEventHandler.bind(this),this.dragEventHandler=this.dragEventHandler.bind(this),this.transformStep=this.transformStep.bind(this)};return h.create=function(e){var t=new h(e);return h.getApi(t)},h.getApi=function(e){var t={};return t.on=e.emitter.on.bind(e.emitter),t.removeListener=e.emitter.removeListener.bind(e.emitter),t.refit=e.refit.bind(e),t.element=e.element,t.container=e.container,t.css=e.setCssStyle.bind(e),t.cssTransform=e.setCssTransform.bind(e),t.cssFilter=e.setCssFilter.bind(e),t.cssTransition=e.setCssTransition.bind(e),t.speed=e.setVelocityScalar.bind(e),t.horizontalSpeed=e.setHorizontalVelocityScalar.bind(e),t.verticalSpeed=e.setVerticalVelocityScalar.bind(e),t.horizontalWind=e.setBaseHorizontalVelocity.bind(e),t.verticalWind=e.setBaseVerticalVelocity.bind(e),Object.defineProperty(t,"speedGradient",{get:function(){return e.horizontalVelocityGradient===e.verticalVelocityGradient?e.horizontalVelocityGradient:void 0},set:function(t){e.horizontalVelocityGradient=t,e.verticalVelocityGradient=t}}),Object.defineProperty(t,"horizontalVelocityGradient",{get:function(){return e.horizontalVelocityGradient},set:function(t){e.horizontalVelocityGradient=t}}),Object.defineProperty(t,"verticalVelocityGradient",{get:function(){return e.verticalVelocityGradient},set:function(t){e.verticalVelocityGradient=t}}),Object.defineProperty(t,"width",{get:function(){return e.width}}),Object.defineProperty(t,"height",{get:function(){return e.height}}),Object.defineProperty(t,"top",{get:function(){return e.top}}),Object.defineProperty(t,"left",{get:function(){return e.left}}),t},h.prototype.horizontalVelocityScalar=0,h.prototype.verticalVelocityScalar=0,h.prototype.baseHorizontalVelocity=0,h.prototype.baseVerticalVelocity=0,h.prototype.msPerStep=16,h.prototype.horizontalVelocityGradient=c.easing.quadraticIn,h.prototype.verticalVelocityGradient=c.easing.quadraticIn,h.prototype.pointerTrackingEvents=["mousemove"],h.prototype.refit=function(){var e=this.container.getBoundingClientRect();this.width=e.width,this.halfWidth=this.width/2,this.height=e.height,this.halfHeight=this.height/2,this.top=e.top,this.left=e.left},h.prototype.startTransformLoop=function(){if(this.transforming)return;this.transforming=!0,this.lastStepTime=Date.now(),this.animationRequestId=f(this.transformStep),this.attachPointerListeners(),this.emitter.emit("move start")},h.prototype.stopTransformLoop=function(){if(!this.transforming)return;this.transforming=!1,l(this.animationRequestId),this.emitter.emit("move stop")},h.prototype.transformStep=function(){var e=Date.now(),t=(e-this.lastStepTime)/this.msPerStep;this.lastHorizontalDisplacement=t*(this.baseHorizontalVelocity+this.horizontalVelocity*this.horizontalVelocityScalar),this.lastVerticalDisplacement=t*(this.baseVerticalVelocity+this.verticalVelocity*this.verticalVelocityScalar),this.lastStepTime=e;if(this.lastHorizontalDisplacement||this.lastVerticalDisplacement)this.horizontalPosition+=this.lastHorizontalDisplacement,this.verticalPosition+=this.lastVerticalDisplacement,this.setCssTransform("translate",this.horizontalPosition+"px, "+this.verticalPosition+"px"),this.animationRequestId=f(this.transformStep);else if(this.trackingPointer||this.baseHorizontalVelocity||this.baseVerticalVelocity)this.animationRequestId=f(this.transformStep)},h.prototype.setBaseHorizontalVelocity=function(e,t,n){if(e===void 0)return this.baseHorizontalVelocity;this.horizontalWindTween&&this.horizontalWindTween.pause(),t?(t*=1e3,n=n||this.baseHorizontalVelocity<e?c.easing.quadraticIn:c.easing.quadraticOut,this.horizontalWindTween=c(n,this,"baseHorizontalVelocity",e,t)):this.baseHorizontalVelocity=e},h.prototype.setBaseVerticalVelocity=function(e,t,n){if(e===void 0)return this.baseVerticalVelocity;this.verticalWindTween&&this.verticalWindTween.pause(),t?(t*=1e3,n=n||this.baseVerticalVelocity<e?c.easing.quadraticIn:c.easing.quadraticOut,this.verticalWindTween=c(n,this,"baseVerticalVelocity",e,t)):this.baseVerticalVelocity=e},h.prototype.setVelocityScalar=function(e,t,n,r){if(e===void 0)return this.horizontalVelocityScalar===this.verticalVelocityScalar?this.horizontalVelocityScalar:void 0;this.setHorizontalVelocityScalar(e,t,n,r),this.setVerticalVelocityScalar(e,t,n)},h.prototype.setHorizontalVelocityScalar=function(e,t,n,r){if(e===void 0)return this.horizontalVelocityScalar;this.horizontalSpeedTween&&this.horizontalSpeedTween.pause(),t?(t*=1e3,n=n||this.horizontalVelocityScalar<e?c.easing.quadraticIn:c.easing.quadraticOut,this.horizontalSpeedTween=c(n,this,"horizontalVelocityScalar",e,t,r)):this.horizontalVelocityScalar=e},h.prototype.setVerticalVelocityScalar=function(e,t,n,r){if(e===void 0)return this.verticalVelocityScalar;this.verticalSpeedTween&&this.verticalSpeedTween.pause(),t?(t*=1e3,n=n||this.verticalVelocityScalar<e?c.easing.quadraticIn:c.easing.quadraticOut,this.verticalSpeedTween=c(n,this,"verticalVelocityScalar",e,t,r)):this.verticalVelocityScalar=e},h.prototype.attachPointerListeners=function(){if(this.trackingPointer)return;this.trackingPointer=!0,u?(o(this.container).on("drag",this.dragEventHandler),this.container.addEventListener("touchmove",p)):this.container.addEventListener("mousemove",this.pointerEventHandler),this.emitter.emit("pointer tracking start")},h.prototype.detachPointerListeners=function(){if(!this.trackingPointer)return;this.trackingPointer=!1,u?(o(this.container).off("drag",this.dragEventHandler),this.container.removeEventListener("touchmove",p)):this.container.removeEventListener("mousemove",this.pointerEventHandler),this.emitter.emit("pointer tracking stop")},h.prototype.dragEventHandler=function(e){this.horizontalVelocity=e.gesture.velocityX,this.verticalVelocity=e.gesture.velocityY,this.horizontalVelocity<.1&&(this.horizontalVelocity=0),this.verticalVelocity<.1&&(this.verticalVelocity=0),this.horizontalVelocity>1&&(this.horizontalVelocity=1),this.verticalVelocity>1&&(this.verticalVelocity=1),e.gesture.deltaX<0&&(this.horizontalVelocity*=-1),e.gesture.deltaY<0&&(this.verticalVelocity*=-1)},h.prototype.pointerEventHandler=function(e){var t=e.changedTouches&&e.changedTouches[0]||e,n=t.clientX-this.left;y=t.clientY-this.top,this.horizontalVelocity=this.horizontalVelocityGradient(n-this.halfWidth,0,n>this.halfWidth?-1:1,this.halfWidth),this.verticalVelocity=this.verticalVelocityGradient(y-this.halfHeight,0,y>this.halfHeight?-1:1,this.halfHeight)},h.prototype.setCssStyle=function(e,t,n){if(t===void 0)return this.element.style[e];n!==void 0&&this.setCssTransition(e,n+"s"),this.element.style[e]=t},h.prototype.setCssTransform=function(e,t,n){if(t===void 0)return this.cssTransforms[e];this.cssTransforms[e]=t,this.updateMultiAttributeStyle(a.transformAttribute,this.cssTransforms)},h.prototype.setCssFilter=function(e,t,n){if(t===void 0)return this.cssFilters[e];n!==void 0&&this.setCssTransition(a.cssFilterAttribute,n+"s"),this.cssFilters[e]=t,this.updateMultiAttributeStyle(a.filterAttribute,this.cssFilters)},h.prototype.setCssTransition=function(e,t){if(t===void 0)return this.cssTransitions[e];this.cssTransitions[e]=t,this.updateMultiAttributeStyle(a.transitionAttribute,this.cssTransitions,!0)},h.prototype.updateMultiAttributeStyle=function(e,t,n){var r,i="",s=!0;for(r in t)t.hasOwnProperty(r)&&(s?s=!1:i+=n?", ":" ",n?i+=r+" "+t[r]:i+=r+"("+t[r]+")");this.element.style[e]=i},t.exports}({},{});return s}(),e.exports}({},{}),k=function(e,t){return e.exports=t,e.exports=function(){var e=function(e,t){function n(e,t,n,r,i){this.objects=[],this.left=e,this.top=t,this.width=n,this.height=r,this.right=this.left+this.width,this.bottom=this.top+this.height,this.isBase=this.width/2<this.minimumSize,this.parent=i}return e.exports=t,e.exports=n,n.prototype.tl=void 0,n.prototype.tr=void 0,n.prototype.br=void 0,n.prototype.bl=void 0,n.prototype.objectLimit=200,n.prototype.minimumSize=3e3,n.prototype.clear=function(){this.objects=[],this.tl&&(this.tl.clear(),this.tr.clear(),this.br.clear(),this.bl.clear())},n.prototype.getObjects=function(){return this.tl?this.objects.concat(this.tl.getObjects(),this.tr.getObjects(),this.br.getObjects(),this.bl.getObjects()):this.objects.slice()},n.prototype.split=function(){var e=this.width/2,t=this.height/2,r=this.left,i=this.top;this.tl=new n(r,i,e,t,this),this.tr=new n(r+e,i,e,t,this),this.br=new n(r+e,i+t,e,t,this),this.bl=new n(r,i+t,e,t,this)},n.prototype.parentNode=function(e){var t=this,n;return e.left<t.left?e.top<t.top?n=t.grow(t.width,t.height):n=t.grow(t.width,0):e.left+e.width>t.left+t.width?e.top<t.top?n=t.grow(0,t.height):n=t.grow(0,0):e.top<t.top?n=t.grow(0,t.height):e.top+e.height>t.top+t.height&&(n=t.grow(0,0)),n?n.parentNode(e):t},n.prototype.getQuadrantAt=function(e,t){if(!this.tl)return this;var n=this.left+this.width/2,r=this.top+this.height/2;return e<n?t<r?this.tl.tl&&this.tl.getQuadrantAt(e,t)||this.tl:this.bl.tl&&this.bl.getQuadrantAt(e,t)||this.bl:t<r?this.tr.tl&&this.tr.getQuadrantAt(e,t)||this.tr:this.br.tl&&this.br.getQuadrantAt(e,t)||this.br},n.prototype.getInteractableObjects=function(e,t,n,r){if(!this.tl)return this.objects.slice();var i=this.getQuadrant(e,t,n,r),s=[i.objects],o=[i],u=i.parent;while(u)s.push(u.objects),o.push(u),u=u.parent;if(i.tl){var a=i.getQuadrantAt(e,t);~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e+n,t),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e+n,t+r),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e,t+r),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&s.push(a.parent.objects))}return Array.prototype.concat.apply([],s)},n.prototype.getQuadrant=function(e,t,n,r){if(!this.tl)return this;var i=this.left+this.width/2,s=this.top+this.height/2,o=t<s&&t+r<s,u=t>s;if(e<i&&e+n<i){if(o)return this.tl.tl&&this.tl.getQuadrant(e,t,n,r)||this.tl;if(u)return this.bl.tl&&this.bl.getQuadrant(e,t,n,r)||this.bl}else if(e>i){if(o)return this.tr.tl&&this.tr.getQuadrant(e,t,n,r)||this.tr;if(u)return this.br.tl&&this.br.getQuadrant(e,t,n,r)||this.br}return this},n.prototype.insert=function(e){var t,n,r,i,s,o;o=this.parentNode(e),t=o.getQuadrant(e.left,e.top,e.width,e.height);if(t!==o)t.insert(e);else{s=o.objects,s.push(e),n=0,r=s.length;if(!this.isBase&&r>o.objectLimit){o.tl||o.split(),i=[];for(;n<r;n++)e=o.objects[n],t=o.getQuadrant(e.left,e.top,e.width,e.height),t!==o?t.insert(e):i.push(e);o.objects=i}}return o},n.prototype.grow=function(e,t){var r=this.left-e,i=this.top-t,s=new n(r,i,this.width*2,this.height*2);return this.parent=s,e?t?s.br=this:s.tr=this:t?s.bl=this:s.tl=this,s.tl=s.tl||new n(r,i,this.width,this.height,this),s.tr=s.tr||new n(r+this.width,i,this.width,this.height,this),s.br=s.br||new n(r+this.width,i+this.height,this.width,this.height,this),s.bl=s.bl||new n(r,i+this.height,this.width,this.height,this),s},e.exports}({},{}),t=function(t,n){function s(e,t,n,r,i){return e.left<=t&&e.top<=n&&e.right>=r&&e.bottom>=i}function o(e,t,n,r,i){if(!i.tl)return i;if(e<i.tr.left){if(n<i.tr.left){if(r<i.bl.top)return o(e,t,n,r,i.tl);if(t>i.bl.top)return o(e,t,n,r,i.bl)}}else{if(r<i.br.top)return o(e,t,n,r,i.tr);if(t>i.br.top)return o(e,t,n,r,i.br)}return i}t.exports=n;var r=e,i=t.exports=function(e,t){e&&(this.width=e,this.height=t?t:e),window.q=this,this.reset()};return i.create=function(e,t){var n=new i(e,t);return i.getApi(n)},i.getApi=function(e){var t={};return t.insert=e.insert.bind(e),t.reset=e.reset.bind(e),t.getObjects=e.getObjects.bind(e),t.prune=e.prune.bind(e),t},i.prototype.width=1e4,i.prototype.height=1e4,i.prototype.reset=function(e,t){e=e||0,t=t||0;var n=-(this.width/2),i=-(this.height/2);this.top=new r(e,t,this.width,this.height)},i.prototype.insert=function(e){this.top=this.top.insert(e)},i.prototype.getContainingNode=function(e,t,n,r,i){if(e<this.top.left||t<this.top.top||n>this.top.right||r>this.top.bottom)return;return o(e,t,n,r,this.top)},i.prototype.minimumSize=3e3,i.prototype.getInteractableObjects=function(e,t,n,r){function h(e,t,n,r){var s=i.getContainingNode(e,t,n,r);s&&!~l.indexOf(s.objects)&&l.push(s.objects)}var i=this,s=this.minimumSize,o=this.getContainingNode(e,t,e+1,t+1),u,a,f,l=o?[o.getObjects()]:[],c;return!o||o.right<n?(u=this.getContainingNode(n-1,t,n,t+1),u?l.push(u.getObjects()):u=o):u=o,!o||o.bottom<r?(a=this.getContainingNode(e,r-1,e+1,r),a?l.push(a.getObjects()):a=o):a=o,!u||u.bottom<r?!a||a.right<n?(f=this.getContainingNode(n-1,r-1,n,r),f?l.push(f.getObjects()):f=a):f=a:f=u,o!==u&&h(e,t,n,t+1),u!==f&&h(n-1,t,n,r),f!==a&&h(e,r-1,n,r),a!==o&&h(e,t,e+1,r),o&&(e-s<o.left&&h(e-s,t,e+1,t+1),t-s<o.top&&h(e,t-s,e+1,t+1)),u&&(u!==o&&t-s<u.top&&h(n-1,t-s,n,t+1),n+s>u.right&&h(n-1,t,n+s,t+1)),f&&(f!==u&&n+s>f.right&&h(n-1,r-1,n+s,r),r+s>f.bottom&&h(n-1,r-1,n,r+s)),a&&(a!==f&&r+s>a.bottom&&h(e,r-1,e+1,r+s),a!==o&&e-s<a.left&&h(e-s,r-1,e+1,r)),Array.prototype.concat.apply([],l)},i.prototype.getObjects=function(e,t,n,r){if(e!==void 0){var i=t+r,s=e+n,o=this.getInteractableObjects(e,t,s,i),u=o.length,a=[],f;while(u--)f=o[u],(t<=f.top?i>=f.top:f.bottom>=t)&&(e<=f.left?s>=f.left:f.right>=e)&&a.push(f);return a}return this.top.getObjects()},i.prototype.prune=function(e,t,n,r){var i=e+n,s=t+r,o,u=[];keptObjects=[];var a=this.top.getObjects(),f=0,l=a.length;for(;f<l;f++)o=a[f],o.left<e||o.top<t||o.left+o.width>i||o.top+o.height>s?u.push(o):keptObjects.push(o);if(keptObjects.length){this.reset(keptObjects[0].left,keptObjects[0].top),f=0,l=keptObjects.length;for(;f<l;f++)this.insert(keptObjects[f])}else this.reset();return u},t.exports}({},{});return t}(),e.exports}({},{}),L=function(e,t){function c(e,t,n,r,i){var s=e.length,o;while(s--){o=e[s];if((n<=o.top?i>=o.top:o.bottom>=n)&&(t<=o.left?r>=o.left:o.right>=t))return!0}return!1}e.exports=t;var n=f,r=k.create,i=C,s=b,o=g,a=m,l=e.exports=function(e){i.call(this,e),this.quadtree=r(15e3),this.tags={},this.activeTags=[],this.updateCanvasDimensions();var t=this;window.c=this};return l.prototype=Object.create(i.prototype),l.create=function(e){var t=new l(e);return l.getApi(t)},l.getApi=function(e){var t=i.getApi(e);return t.createTag=e.createTag.bind(e),t.configureTag=e.configureTag.bind(e),t.setActiveTags=e.setActiveTags.bind(e),t.pause=e.pause.bind(e),t.resume=e.resume.bind(e),t.load=e.loadElements.bind(e),t.add=e.addElements.bind(e),t.remove=e.removeElement.bind(e),t.get=e.getElements.bind(e),t.showElement=e.showElement.bind(e),t.loader=e.loader,t.fill=function(){return e.updateCanvasDimensions(),e.pickNextElement(),e.nextElement?e.fillCenter():[]},t.start=e.start.bind(e),t},l.loader=N,l.element=u,l.prototype.scanTryLimit=20,l.prototype.missLimit=4,l.prototype.elementMargin=25,l.prototype.overScan=0,l.prototype.hidingArea=document.createDocumentFragment(),l.prototype.minElementSize=50,l.prototype.createTag=function(e,t){return this.tags[e]=a.create(t)},l.prototype.configureTag=function(e,t){var n=this.tags[e];if(!n){this.createTag(t);return}"skipProbability"in t&&(n.skipProbability=t.skipProbability),"tryLimit"in t&&(n.tryLimit=t.tryLimit)},l.prototype.loadElements=function(e,t,r){var i=this.addElements.bind(this,e),s,o,u,a,f,c,h,p=[];typeof t=="string"?(s={},s[t]=r):s=t;for(o in s)if(s.hasOwnProperty(o)){u=l.loader[o],f=s[o],Array.isArray(f)||(f=[f]),c=f.length;while(a=f[--c])h=u(this,a).then(i),p.push(h)}return n.allResolved(p)},l.prototype.addElements=function(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);var n=e.length,r,i,s;while(r=e[--n]){i=this.tags[r]||this.createTag(r),s=t.length;while(s--)i.add(t[s])}},l.prototype.fadeInToCenter=function(){},l.prototype.removeElement=function(e,t){Array.isArray(e)||(e=[e]);var n=e.length,r,i;while(r=e[n--]){i=this.tags[r];if(!i)continue;i.remove(t)}},l.prototype.getElements=function(){var e=arguments.length>0?arguments:Object.keys(this.tags),t=e.length,n,r,i,s=[];while(n=e[--t])if(r=this.tags[n])s=s.concat(r.getElements());return s},l.prototype.setActiveTags=function(){var e=arguments.length,t,n,r,i=[];while(t=arguments[--e])if(n=this.tags[t]){r=n.chanceMultiplier;while(r--)i.push(n)}this.activeTags=i},l.prototype.getRandomActiveTag=function(){var e,t=this.getRandomActiveTagFailSafe;while(t--){e=this.activeTags[Math.random()*this.activeTags.length|0];if(e.skipProbability<Math.random())break}return e},l.prototype.pause=function(e){if(this.savedHorizontalVelocityScalar!==void 0)return;this.savedHorizontalVelocityScalar=this.horizontalVelocityScalar,this.savedVerticalVelocityScalar=this.verticalVelocityScalar,this.setVelocityScalar(0,e||.4)},l.prototype.resume=function(e){if(this.savedHorizontalVelocityScalar===void 0)return;this.setHorizontalVelocityScalar(this.savedHorizontalVelocityScalar,e||.4),this.setVerticalVelocityScalar(this.savedVerticalVelocityScalar,e||.4),this.savedHorizontalVelocityScalar=void 0},l.prototype.savedHorizontalVelocityScalar=void 0,l.prototype.savedVerticalVelocityScalar=void 0,l.prototype.getRandomActiveTagFailSafe=20,l.prototype.getRandomElementFailSafe=20,l.prototype.getRandomElementTryLimit=20,l.prototype.maxElementWidth=2e3,l.prototype.maxElementHeight=1e3,l.prototype.getRandomElement=function(){var e=this.getRandomElementFailSafe,t=!0,n=this.viewportLeft-this.maxElementWidth,r=this.viewportTop-this.maxElementHeight,i=this.viewportRight+this.maxElementWidth,s=this.viewportBottom+this.maxElementHeight,o,u,a;while(t&&e--){u=this.getRandomActiveTag(),a=u.tryLimit||this.getRandomElementTryLimit;while(a--){o=u.getRandomElement();if(!o.isIn(n,r,i,s))return o}}},l.prototype.transformStep=function(){i.prototype.transformStep.call(this),this.updateCanvasDimensions(),this.updateElementVisibility(),this.maxCheckHeight=0,this.maxCheckWidth=0,this.pickNextElement(),this.nextElement&&this.fill()},l.prototype.start=function(){arguments.length>0&&this.setActiveTags.apply(this,arguments);if(this.activeTags.length===0)throw new Error("Unable to start without active tags");this.startTransformLoop(),this.updateCanvasDimensions(),this.pickNextElement(),this.nextElement&&this.fillCenter()},l.prototype.pickNextElement=function(){this.nextElement=this.getRandomElement(),this.missCount=0,this.nextElement&&this.updateBounds()},l.prototype.insertNextElement=function(e,t,n){var r=this.showElement(this.nextElement,e,t,n);return this.pickNextElement(),r},l.prototype.showElement=function(e,t,n,r){var i=new o(e,t,n);return this.quadtree.insert(i),r?i.show(this.element):i.hide(this.hidingArea),i},l.prototype.getViewportBoundingBoxes=function(){return this.quadtree.getObjects(this.viewportLeft,this.viewportTop,this.viewportWidth,this.viewportHeight)},l.prototype.getViewportElements=function(){var e=this.getViewportBoundingBoxes(),t=e.length,n=[];while(t--)n.push(e[t].element);return n},l.prototype.updateElementVisibility=function(){var e=this.visibleBoxes||[],t=this.quadtree.getObjects(this.viewportLeft,this.viewportTop,this.viewportWidth,this.viewportHeight),n,r;n=e.length;while(n--)e[n].hidePending=!0;n=t.length;while(n--)r=t[n],r.visible||r.show(this.element),r.hidePending=!1;n=e.length;while(n--)r=e[n],r.hidePending&&r.hide(this.hidingArea);this.visibleBoxes=t},l.prototype.updateCanvasDimensions=function(){this.viewportLeft=-1*this.horizontalPosition-this.overScan,this.viewportTop=-1*this.verticalPosition-this.overScan,this.viewportWidth=this.width+this.overScan*2,this.viewportHeight=this.height+this.overScan*2,this.viewportRight=this.viewportLeft+this.viewportWidth,this.viewportBottom=this.viewportTop+this.viewportHeight,this.movingUp=this.lastVerticalDisplacement>0,this.movingLeft=this.lastHorizontalDisplacement>0},l.prototype.fillCenter=function(){var e=this.quadtree.getObjects(this.viewportLeft-this.checkWidth,this.viewportTop-this.checkHeight,this.viewportWidth+this.checkWidth*2,this.viewportHeight+this.checkHeight*2),t=[],n,r,i,s,o=0,u=this.scanTryLimit*10,a=0,f=u/20;for(;o<u;o++){a++;if(a>f){a=0,this.pickNextElement();if(!this.nextElement)break}n=this.viewportLeft-this.checkWidth+Math.floor((this.viewportWidth+this.checkWidth)*Math.random()),r=this.viewportTop-this.checkHeight+Math.floor((this.viewportHeight+this.checkHeight)*Math.random()),i=n+this.checkWidth,s=r+this.checkHeight;if(!c(e,n,r,i,s)){t.push(this.insertNextElement(n+this.elementMargin,r+this.elementMargin));if(!this.nextElement)break;a=0,e=this.quadtree.getObjects(this.viewportLeft-this.checkWidth,this.viewportTop-this.checkHeight,this.viewportWidth+this.checkWidth*2,this.viewportHeight+this.checkHeight*2)}}return this.updateElementVisibility(),t},l.prototype.updateBounds=function(){this.checkHeight=this.nextElement.height+this.elementMargin*2,this.checkWidth=this.nextElement.width+this.elementMargin*2,this.checkLeft=this.movingLeft?this.viewportLeft-this.checkWidth:this.viewportRight,this.checkTop=this.movingUp?this.viewportTop-this.checkHeight:this.viewportBottom,this.checkRight=this.checkLeft+this.checkWidth,this.checkBottom=this.checkTop+this.checkHeight,this.scanLeft=this.viewportLeft-this.checkWidth,this.scanTop=this.viewportTop-this.checkHeight,this.scanWidth=this.viewportWidth+this.checkWidth,this.scanHeight=this.viewportHeight+this.checkHeight,this.horizontalBoxes=this.quadtree.getObjects(this.movingLeft?this.viewportLeft-this.checkWidth:this.viewportRight,this.scanTop,this.checkWidth,this.scanHeight+this.checkHeight),this.verticalBoxes=this.quadtree.getObjects(this.scanLeft,this.movingUp?this.viewportTop-this.checkHeight:this.viewportBottom,this.scanWidth+this.checkWidth,this.checkHeight)},l.prototype.fill=function(){var e=0,t=this.scanTryLimit,n,r,i,s;this.missCount++;if(this.missCount>this.missLimit){this.pickNextElement();if(!this.nextElement)return}for(;e<t;e++){n=this.scanLeft+Math.floor(this.scanWidth*Math.random()),i=n+this.checkWidth;if(!c(this.verticalBoxes,n,this.checkTop,i,this.checkBottom)){this.insertNextElement(n+this.elementMargin,this.checkTop+this.elementMargin);if(!this.nextElement)break}r=this.scanTop+Math.floor(this.scanHeight*Math.random()),s=r+this.checkHeight;if(!c(this.horizontalBoxes,this.checkLeft,r,this.checkRight,s)){box=this.insertNextElement(this.checkLeft+this.elementMargin,r+this.elementMargin),this.horizontalBoxes.push(box);if(!this.nextElement)break}}},e.exports}({},{});return L}(),e.exports}({},{}),a=function(e,t){e.exports=t;var n=t.noop=function(){};typeof console=="undefined"?t.log=n:console.log&&console.log.bind?t.log=console.log.bind(console):t.log=function(e){console.log(e)},t.extend=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},t.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},t.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},t.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||n;var r=document.body.style;return t.transitionAttribute=r.msTransition!==void 0&&"msTransition"||r.webkitTransition!==void 0&&"webkitTransition"||r.MozTransition!==void 0&&"MozTransition"||r.transition!==void 0&&"transition",window.utils=t,e.exports}({},{}),f=function(t,s){function p(){var e=this;this.mainCollageElement=document.getElementById("MainCollage"),this.introOverlayElement=document.getElementById("IntroOverlay"),this.finaleOverlayElement=document.getElementById("FinaleOverlay"),this.collage=f.create(this.mainCollageElement),this.emitter=new EventEmitter,this.windowClickHandler=this.windowClickHandler.bind(this);var t=Array.prototype.every&&["opacity","textshadow","backgroundsize","csstransitions","csstransforms","csstransforms3d","generatedcontent"].every(function(e){return Modernizr[e]});if(!t){this.introOverlayElement.querySelector(".incompatible").style.display="block";return}Modernizr.cssfilters||Array.prototype.forEach.call(this.introOverlayElement.querySelectorAll(".not-chrome"),function(e){e.style.display="block"}),this.introOverlayElement.querySelector(".load").style.display="block",document.body.className+=" loading",this.introOverlayElement.style[l.transitionAttribute]="opacity 1s",this.introOverlayElement.style.opacity=1;var n=setTimeout(function(){e.introOverlayElement.querySelector(".progress-report").style.display="block"},8e3),r=setTimeout(function(){e.introOverlayElement.querySelector(".slow-connection").style.display="block"},2e4);window.addEventListener("resize",function(){e.collage.refit()}),this.load().done(function(){console.log("preload complete"),clearTimeout(n),clearTimeout(r),e.ready=!0,document.body.className=document.body.className.replace("loading",""),e.introOverlayElement.querySelector(".load").style.display="none",e.introOverlayElement.querySelector(".ready").style.display="block",window.addEventListener("click",e.windowClickHandler)})}function d(){var e=document.createElement("div");return e.className="title",e.innerHTML="Same Love",document.body.appendChild(e),new f.element.Simple(e)}t.exports=s,i,r,n;var o=e,f=u,l=a,c=l.log,h=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;return t.exports=function(){return new p},window.credits=window.credits||{},window.credits.websites={Reddit:"http://www.reddit.com/r/lgbt/",Wikipedia:"http://en.wikipedia.org/Civil_rights_movement"},p.prototype.fillCredits=function(){var e,t=[];Object.keys(window.credits.flickr).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.flickr[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#flickrCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.reddit).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.reddit[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#redditCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.youtube).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.youtube[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#youtubeCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.websites).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.websites[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#websiteCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.facebook).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.facebook[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#facebookPageCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.twitter).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.twitter[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#twitterPostCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.nyTimes).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.nyTimes[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#nyTimesArticleCredits").innerHTML=t.join(", "),t=[],Object.keys(window.credits.googleNews).sort().forEach(function(e){t.push('<a target="_blank" href="'+window.credits.googleNews[e]+'">'+e+"</a>")}),this.finaleOverlayElement.querySelector("#googleNewsArticleCredits").innerHTML=t.join(", ")},p.prototype.load=function(){var e=this,t=this.collage;return this.emitter.emit("loading"),f.loader.youtube(t,{videoId:"hlVBg7_08n0",loop:!1,height:444,width:1065,continuousPlay:!0}).then(function(n){e.musicVideo=n,n.element.style.zIndex=100,t.add("music video",n)}).then(function(){var e=[],n={flickr:[{tags:"antigay,protest",sort:"interestingness-desc"},{tags:"westboro,hate",sort:"interestingness-desc"}],youtube:[{query:"marriage protest",mute:!0,loop:!0}]},r={iframe:[{url:"http://en.wikipedia.org/wiki/Homophobia",width:800,height:600},{url:"http://en.wikipedia.org/wiki/DOMA",width:800,height:600},{url:"http://en.wikipedia.org/wiki/Conversion_therapy",width:800,height:600},{url:"http://en.wikipedia.org/wiki/Societal_attitudes_toward_homosexuality#Anti-homosexual_attitudes",width:800,height:600}],facebook:[{type:"pages",minLikes:200,query:"one man one woman"},{type:"pages",ids:["NationForMarriage"]}]};h||(r.youtube=[{videoId:"8cQCi4ehXkg",mute:!0,autoplay:!0,loop:!0,startTime:108},{videoId:"-9atnCSSFP8",mute:!0,autoplay:!0,loop:!0,startTime:66}]);var i={twitter:[{query:"fags"},{query:"faggot"}]},s={flickr:[{tags:"protest",isCommons:!0,sort:"interestingness-desc"}],iframe:[{url:"http://en.wikipedia.org/wiki/Civil_rights_movement",width:800,height:600}]},o={flickr:[{tags:"samesexmarriage",sort:"interestingness-desc"},{tags:"prop8",sort:"interestingness-desc"}],reddit:[{query:"same-sex marriage subreddit:pics",limit:"30"}],youtube:[{videoId:"u62OtM_vt5k",mute:!0,autoplay:!0,loop:!0},{videoId:"zPcHmlqZnXQ",mute:!0,autoplay:!0,loop:!0}]},u={googleNews:["lgbt"],nyTimes:[{query:"anti-gay+nytd_des_facet%3A%5BHate+Crimes%5D"}]},a={googleNews:["same-sex marriage"],nyTimes:[{query:"nytd_des_facet%3A%5BSame-Sex+Marriage%2C+Civil+Unions+and+Domestic+Partnerships%5D"}]},f={flickr:[{tags:"gaymarried",sort:"interestingness-desc",count:"20"}]},l={flickr:[{tags:"gaycouple",sort:"interestingness-desc",count:"20"},{tags:"lesbiancouple",sort:"interestingness-desc",count:"20"},{tags:"gaymarried",sort:"interestingness-desc",count:"20"}],facebook:[{type:"pages",minLikes:200,ids:["gayrights.change.org","106313199390099","humanrightscampaign"]}],twitter:[{query:"LegalizeGayMarriage"}],reddit:[{query:"married site:imgur.com subreddit:lgbt",limit:"10"},{type:"embed",query:"same-sex marriage"}]};return t.load("kids",{flickr:["kids,playing"]}).then(function(){return console.log("load anti-gay religious protests"),t.load("anti-gay religious protests",n)}).then(function(){return console.log("load fud"),t.load("fud",r)}).then(function(){return console.log("load carelessness"),t.load("carelessness",i)}).then(function(){return console.log("load civil rights"),t.load("civil rights",s)}).then(function(){return console.log("load protests"),t.load("protests",o)}).then(function(){return console.log("load general LGBT news"),t.load("general lgbt news",u)}).then(function(){return console.log("load same sex marriage"),t.load("same-sex marriage news",a)}).then(function(){return console.log("load same sex marriage photos"),t.load("same-sex marriage photos",f)}).then(function(){return console.log("load same love"),t.load("same love",l)})})},p.prototype.start=function(){var e=this;if(this.started)return;this.started=!0,this.mainCollageElement.style.backgroundColor="white",this.mainCollageElement.style[l.transitionAttribute]="background-color 30s";var t=this.titleElement=d();t.element.style.opacity=1,t.element.style[l.transitionAttribute]="opacity 30s";var n=this.collage.width/2,r=this.collage.height/2,i=n-this.musicVideo.width/2,s=r-this.musicVideo.height/2;this.collage.showElement(t,n-t.width/2,s-t.height,!0),this.collage.showElement(this.musicVideo,i,s,!0),this.collage.configureTag("music video",{chanceMultiplier:3}),this.collage.on("move start",function(){console.log("MOVE START")}),this.collage.on("move stop",function(){console.log("MOVE STOP")}),this.collage.on("pointer tracking start",function(){console.log("POINTER TRACKING START")}),this.collage.on("pointer tracking stop",function(){console.log("POINTER TRACKING STOP")}),this.setupTiming()},p.prototype.setupTiming=function(){var e=this,t=e.collage,n;this.musicVideo.on("time:1",function(){c("experience start: fade to black"),t.container.style.backgroundColor="black",e.titleElement.element.style.opacity=0,t.setActiveTags("music video","kids"),n=t.fill(),n.forEach(function(e){e.element.element.style.opacity=0,e.element.element.style[l.transitionAttribute]="opacity 2s"}),t.start()}),this.musicVideo.on("time:11",function(){c("visual start")}),this.musicVideo.on("time:43",function(){c("allow movement, show kids"),t.setActiveTags("music video","kids"),n.forEach(function(e){e.element.element.style.opacity=1}),t.speed(6,2)}),this.musicVideo.on("time:77",function(){c("show gay fear/uncertainty/doubt"),t.setActiveTags("music video","fud")}),this.musicVideo.on("time:100",function(){c("show anti-gay religious protests"),t.setActiveTags("music video","anti-gay religious protests")}),this.musicVideo.on("time:137",function(){c("show carelessness"),t.setActiveTags("music video","carelessness")}),this.musicVideo.on("time:156",function(){c("show misc civil rights"),t.setActiveTags("music video","civil rights")}),this.musicVideo.on("time:171",function(){c("show struggle for gay rights"),t.setActiveTags("music video","protests")}),this.musicVideo.on("time:228",function(){c("show general recent news regarding lgbt people"),t.setActiveTags("music video","protests","general lgbt news")}),this.musicVideo.on("time:244",function(){c("show general recent news regarding same-sex marriage"),t.setActiveTags("music video","same-sex marriage news","same-sex marriage photos")}),this.musicVideo.on("time:260",function(){c("show love"),t.setActiveTags("music video","same love","same-sex marriage photos")}),this.musicVideo.on("time:320",function(){c("recenter video"),t.setActiveTags("music video")}),this.musicVideo.on("time:330",function(){c("roll credits"),e.transitionToCredits()})},p.prototype.startCredits=function(){var e=this;c("credits"),this.finaleOverlayElement.style.display="block"},p.prototype.transitionToCredits=function(){var e=this;c("transition: bluring, coming to a stop, and starting credits"),this.collage.speed(0,1e4,null,function(){e.collage.pause()}),this.collage.css("opacity",0,5),this.fillCredits(),setTimeout(this.startCredits.bind(this),4e3)},p.prototype.windowClickHandler=function(){var e=this;l.requestFullscreen.call(document.documentElement),setTimeout(function(){e.introOverlayElement.style.opacity=0,setTimeout(function(){e.introOverlayElement.style.display="none",e.start()},1e3)},500)},t.exports}({},{}),l=function(e,t){function r(){if(i)return;i=!0;var e=s();window.experience=e}e.exports=t;var n=a;window.onYouTubeIframeAPIReady=r;var i=!1,s=f;return setTimeout(function(){r()},5e3),e.exports}({},{});return l}();